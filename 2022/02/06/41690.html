<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="大数据项目之尚品汇（2业务数据采集平台), blogs,互联网,测试,大数据,生活,记录">
    <meta name="description" content="第1章 电商业务简介1.1 电商业务流程电商的业务流程可以以一个普通用户的浏览足迹为例进行说明，用户点开电商首页开始浏览，可能会通过分类查询也可能通过全文搜索寻找自己中意的商品，这些商品无疑都是存储在后台的管理系统中的。当用户寻找到自己中意">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>大数据项目之尚品汇（2业务数据采集平台) | 读序</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 5.4.1">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="读序" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">读序</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">

      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/archives">
          
          <i class="fas fa-hourglass-half" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>时轴</span>
        </a>
      </li>
      
      <li>
        <a href="/pdf">
          
          <i class="fas fa-file-pdf" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>PDF</span>
        </a>
      </li>
      
      <li>
        <a href="/sql">
          
          <i class="fas fa-database" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>SQL</span>
        </a>
      </li>
      
      <li>
        <a href="/desktop">
          
          <i class="fas fa-desktop" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>Desktop</span>
        </a>
      </li>
      
      <li>
        <a href="/my_nav">
          
          <i class="fas fa-search" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>Nav</span>
        </a>
      </li>
      
      <li>
        <a href="/duxu-dailylife">
          
          <i class="fas fa-pen" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>blog</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/books" class="waves-effect waves-light">

      
      <i class="fas fa-list" style="zoom: 0.6;"></i>
      
      <span>Medias</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/musics">
          
          <i class="fas fa-music" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>musics</span>
        </a>
      </li>
      
      <li>
        <a href="/books">
          
          <i class="fas fa-book" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>books</span>
        </a>
      </li>
      
      <li>
        <a href="/videos">
          
          <i class="fas fa-film" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>videos</span>
        </a>
      </li>
      
      <li>
        <a href="/galleries">
          
          <i class="fas fa-image" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>galleries</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">读序</div>
        <div class="logo-desc">
            
            我们每一个人都因为生存而充满焦虑，我们真实的存在被不真实的存在所笼罩。而实际上，真正的我们并不会受到不真实存在的威胁。
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-archive"></i>
			
			归档
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/archives " style="margin-left:50px">
				  
				   <i class="fa fas fa-hourglass-half" style="position: absolute;left:28px" ></i>
			      
		          <span>时轴</span>
                  </a>
                </li>
              
                <li>

                  <a href="/pdf " style="margin-left:50px">
				  
				   <i class="fa fas fa-file-pdf" style="position: absolute;left:28px" ></i>
			      
		          <span>PDF</span>
                  </a>
                </li>
              
                <li>

                  <a href="/sql " style="margin-left:50px">
				  
				   <i class="fa fas fa-database" style="position: absolute;left:28px" ></i>
			      
		          <span>SQL</span>
                  </a>
                </li>
              
                <li>

                  <a href="/desktop " style="margin-left:50px">
				  
				   <i class="fa fas fa-desktop" style="position: absolute;left:28px" ></i>
			      
		          <span>Desktop</span>
                  </a>
                </li>
              
                <li>

                  <a href="/my_nav " style="margin-left:50px">
				  
				   <i class="fa fas fa-search" style="position: absolute;left:28px" ></i>
			      
		          <span>Nav</span>
                  </a>
                </li>
              
                <li>

                  <a href="/duxu-dailylife " style="margin-left:50px">
				  
				   <i class="fa fas fa-pen" style="position: absolute;left:28px" ></i>
			      
		          <span>blog</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-list"></i>
			
			Medias
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/musics " style="margin-left:50px">
				  
				   <i class="fa fas fa-music" style="position: absolute;left:28px" ></i>
			      
		          <span>musics</span>
                  </a>
                </li>
              
                <li>

                  <a href="/books " style="margin-left:50px">
				  
				   <i class="fa fas fa-book" style="position: absolute;left:28px" ></i>
			      
		          <span>books</span>
                  </a>
                </li>
              
                <li>

                  <a href="/videos " style="margin-left:50px">
				  
				   <i class="fa fas fa-film" style="position: absolute;left:28px" ></i>
			      
		          <span>videos</span>
                  </a>
                </li>
              
                <li>

                  <a href="/galleries " style="margin-left:50px">
				  
				   <i class="fa fas fa-image" style="position: absolute;left:28px" ></i>
			      
		          <span>galleries</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/bigworldxld/bigworldxld.github.io" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/bigworldxld/bigworldxld.github.io" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    
<script src="/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请使用开启大门的钥匙')).toString(CryptoJS.enc.Hex)) {
                alert('密钥错误，将返回主页！');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('/images/datawarehouse.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">大数据项目之尚品汇（2业务数据采集平台)</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/hive/">
                                <span class="chip bg-color">hive</span>
                            </a>
                        
                            <a href="/tags/spark/">
                                <span class="chip bg-color">spark</span>
                            </a>
                        
                            <a href="/tags/kafka/">
                                <span class="chip bg-color">kafka</span>
                            </a>
                        
                            <a href="/tags/Azkaban/">
                                <span class="chip bg-color">Azkaban</span>
                            </a>
                        
                            <a href="/tags/hadoop/">
                                <span class="chip bg-color">hadoop</span>
                            </a>
                        
                            <a href="/tags/zookeeper/">
                                <span class="chip bg-color">zookeeper</span>
                            </a>
                        
                            <a href="/tags/flume/">
                                <span class="chip bg-color">flume</span>
                            </a>
                        
                            <a href="/tags/sqoop/">
                                <span class="chip bg-color">sqoop</span>
                            </a>
                        
                            <a href="/tags/superset/">
                                <span class="chip bg-color">superset</span>
                            </a>
                        
                            <a href="/tags/hbase/">
                                <span class="chip bg-color">hbase</span>
                            </a>
                        
                            <a href="/tags/Presto/">
                                <span class="chip bg-color">Presto</span>
                            </a>
                        
                            <a href="/tags/kylin/">
                                <span class="chip bg-color">kylin</span>
                            </a>
                        
                            <a href="/tags/zabbix/">
                                <span class="chip bg-color">zabbix</span>
                            </a>
                        
                            <a href="/tags/Kerberos/">
                                <span class="chip bg-color">Kerberos</span>
                            </a>
                        
                            <a href="/tags/ranger/">
                                <span class="chip bg-color">ranger</span>
                            </a>
                        
                            <a href="/tags/atlas/">
                                <span class="chip bg-color">atlas</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/data-warehouse/" class="post-category">
                                data warehouse
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2022-02-06
                </div>
                

                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    4.7k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    19 分
                </div>
                

                
				
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
				

            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="第1章-电商业务简介"><a href="#第1章-电商业务简介" class="headerlink" title="第1章 电商业务简介"></a>第1章 电商业务简介</h1><h2 id="1-1-电商业务流程"><a href="#1-1-电商业务流程" class="headerlink" title="1.1 电商业务流程"></a>1.1 电商业务流程</h2><p>电商的业务流程可以以一个普通用户的浏览足迹为例进行说明，用户点开电商首页开始浏览，可能会通过分类查询也可能通过全文搜索寻找自己中意的商品，这些商品无疑都是存储在后台的管理系统中的。<br>当用户寻找到自己中意的商品，可能会想要购买，将商品添加到购物车后发现需要登录，登录后对商品进行结算，这时候购物车的管理和商品订单信息的生成都会对业务数据库产生影响，会生成相应的订单数据和支付数据。<br>订单正式生成之后，还会对订单进行跟踪处理，直到订单全部完成。<br>电商的主要业务流程包括用户前台浏览商品时的商品详情的管理，用户商品加入购物车进行支付时用户个人中心&amp;支付服务的管理，用户支付完成后订单后台服务的管理，这些流程涉及到了十几个甚至几十个业务数据表，甚至更多。</p>
<img src="/2022/02/06/41690/%E7%94%B5%E5%95%86%E4%B8%9A%E5%8A%A1%E6%B5%81%E7%A8%8B.png" class title="This is an example image">

<h2 id="1-2-电商常识"><a href="#1-2-电商常识" class="headerlink" title="1.2 电商常识"></a>1.2 电商常识</h2><h3 id="1-2-1-SKU和SPU"><a href="#1-2-1-SKU和SPU" class="headerlink" title="1.2.1 SKU和SPU"></a>1.2.1 SKU和SPU</h3><p> SKU = Stock Keeping Unit（库存量基本单位）。现在已经被引申为产品统一编号的简称，每种产品均对应有唯一的SKU号。<br> SPU（Standard Product Unit）：是商品信息聚合的最小单位，是一组可复用、易检索的标准化信息集合。<br>例如：iPhoneX手机就是SPU。一台银色、128G内存的、支持联通网络的iPhoneX，就是SKU。</p>
<img src="/2022/02/06/41690/SKU%E5%92%8CSPU.png" class title="This is an example image">

<p>SPU表示一类商品。同一SPU的商品可以共用商品图片、海报、销售属性等。</p>
<h3 id="1-2-2-平台属性和销售属性"><a href="#1-2-2-平台属性和销售属性" class="headerlink" title="1.2.2 平台属性和销售属性"></a>1.2.2 平台属性和销售属性</h3><p>1）平台属性</p>
<img src="/2022/02/06/41690/%E5%B9%B3%E5%8F%B0%E5%B1%9E%E6%80%A7.png" class title="This is an example image">

<p>2）销售属性</p>
<img src="/2022/02/06/41690/%E9%94%80%E5%94%AE%E5%B1%9E%E6%80%A7.png" class title="This is an example image">

<h2 id="1-3-电商系统表结构"><a href="#1-3-电商系统表结构" class="headerlink" title="1.3 电商系统表结构"></a>1.3 电商系统表结构</h2><p>以下为本电商数仓系统涉及到的业务数据表结构关系。这34个表以订单表、用户表、SKU商品表、活动表和优惠券表为中心，延伸出了优惠券领用表、支付流水表、活动订单表、订单详情表、订单状态表、商品评论表、编码字典表退单表、SPU商品表等，用户表提供用户的详细信息，支付流水表提供该订单的支付详情，订单详情表提供订单的商品数量等情况，商品表给订单详情表提供商品的详细信息。本次讲解以此34个表为例，实际项目中，业务数据库中表格远远不止这些。</p>
<img src="/2022/02/06/41690/%E7%94%B5%E5%95%86%E4%B8%9A%E5%8A%A1%E8%A1%A8.png" class title="This is an example image">

<img src="/2022/02/06/41690/%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F.png" class title="This is an example image">

<h3 id="1-3-1-活动信息表（activity-info）"><a href="#1-3-1-活动信息表（activity-info）" class="headerlink" title="1.3.1 活动信息表（activity_info）"></a>1.3.1 活动信息表（activity_info）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>活动id</td>
</tr>
<tr>
<td><em><strong>*activity_name*</strong></em></td>
<td>活动名称</td>
</tr>
<tr>
<td><em><strong>*activity_type*</strong></em></td>
<td>活动类型（1：满减，2：折扣）</td>
</tr>
<tr>
<td><em><strong>*activity_desc*</strong></em></td>
<td>活动描述</td>
</tr>
<tr>
<td><em><strong>*start_time*</strong></em></td>
<td>开始时间</td>
</tr>
<tr>
<td><em><strong>*end_time*</strong></em></td>
<td>结束时间</td>
</tr>
<tr>
<td><em><strong>*create_time*</strong></em></td>
<td>创建时间</td>
</tr>
</tbody></table>
<h3 id="1-3-2-活动规则表（activity-rule）"><a href="#1-3-2-活动规则表（activity-rule）" class="headerlink" title="1.3.2 活动规则表（activity_rule）"></a>1.3.2 活动规则表（activity_rule）</h3><table>
<thead>
<tr>
<th><em><strong>*id*</strong></em></th>
<th><em><strong>*编号*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*activity_id*</strong></em></td>
<td>活动ID</td>
</tr>
<tr>
<td><em><strong>*activity_type*</strong></em></td>
<td>活动类型</td>
</tr>
<tr>
<td><em><strong>*condition_amount*</strong></em></td>
<td>满减金额</td>
</tr>
<tr>
<td><em><strong>*condition_num*</strong></em></td>
<td>满减件数</td>
</tr>
<tr>
<td><em><strong>*benefit_amount*</strong></em></td>
<td>优惠金额</td>
</tr>
<tr>
<td><em><strong>*benefit_discount*</strong></em></td>
<td>优惠折扣</td>
</tr>
<tr>
<td><em><strong>*benefit_level*</strong></em></td>
<td>优惠级别</td>
</tr>
</tbody></table>
<h3 id="1-3-3-活动商品关联表（activity-sku）"><a href="#1-3-3-活动商品关联表（activity-sku）" class="headerlink" title="1.3.3 活动商品关联表（activity_sku）"></a>1.3.3 活动商品关联表（activity_sku）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>编号</td>
</tr>
<tr>
<td><em><strong>*activity_id*</strong></em></td>
<td>活动id</td>
</tr>
<tr>
<td><em><strong>*sku_id*</strong></em></td>
<td>sku_id</td>
</tr>
<tr>
<td><em><strong>*create_time*</strong></em></td>
<td>创建时间</td>
</tr>
</tbody></table>
<h3 id="1-3-4-平台属性表（base-attr-info）"><a href="#1-3-4-平台属性表（base-attr-info）" class="headerlink" title="1.3.4 平台属性表（base_attr_info）"></a>1.3.4 平台属性表（base_attr_info）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>编号</td>
</tr>
<tr>
<td><em><strong>*attr_name*</strong></em></td>
<td>属性名称</td>
</tr>
<tr>
<td><em><strong>*category_id*</strong></em></td>
<td>分类id</td>
</tr>
<tr>
<td><em><strong>*category_level*</strong></em></td>
<td>分类层级</td>
</tr>
</tbody></table>
<h3 id="1-3-5-平台属性值表（base-attr-value）"><a href="#1-3-5-平台属性值表（base-attr-value）" class="headerlink" title="1.3.5 平台属性值表（base_attr_value）"></a>1.3.5 平台属性值表（base_attr_value）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>编号</td>
</tr>
<tr>
<td><em><strong>*value_name*</strong></em></td>
<td>属性值名称</td>
</tr>
<tr>
<td><em><strong>*attr_id*</strong></em></td>
<td>属性id</td>
</tr>
</tbody></table>
<h3 id="1-3-6-一级分类表（base-category1）"><a href="#1-3-6-一级分类表（base-category1）" class="headerlink" title="1.3.6 一级分类表（base_category1）"></a>1.3.6 一级分类表（base_category1）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>编号</td>
</tr>
<tr>
<td><em><strong>*name*</strong></em></td>
<td>分类名称</td>
</tr>
</tbody></table>
<h3 id="1-3-7-二级分类表（base-category2）"><a href="#1-3-7-二级分类表（base-category2）" class="headerlink" title="1.3.7 二级分类表（base_category2）"></a>1.3.7 二级分类表（base_category2）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>编号</td>
</tr>
<tr>
<td><em><strong>*name*</strong></em></td>
<td>二级分类名称</td>
</tr>
<tr>
<td><em><strong>*category1_id*</strong></em></td>
<td>一级分类编号</td>
</tr>
</tbody></table>
<h3 id="1-3-8-三级分类表（base-category3）"><a href="#1-3-8-三级分类表（base-category3）" class="headerlink" title="1.3.8 三级分类表（base_category3）"></a>1.3.8 三级分类表（base_category3）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>编号</td>
</tr>
<tr>
<td><em><strong>*name*</strong></em></td>
<td>三级分类名称</td>
</tr>
<tr>
<td><em><strong>*category2_id*</strong></em></td>
<td>二级分类编号</td>
</tr>
</tbody></table>
<h3 id="1-3-9-字典表（base-dic）"><a href="#1-3-9-字典表（base-dic）" class="headerlink" title="1.3.9 字典表（base_dic）"></a>1.3.9 字典表（base_dic）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*dic_code*</strong></em></td>
<td>编号</td>
</tr>
<tr>
<td><em><strong>*dic_name*</strong></em></td>
<td>编码名称</td>
</tr>
<tr>
<td><em><strong>*parent_code*</strong></em></td>
<td>父编号</td>
</tr>
<tr>
<td><em><strong>*create_time*</strong></em></td>
<td>创建日期</td>
</tr>
<tr>
<td><em><strong>*operate_time*</strong></em></td>
<td>修改日期</td>
</tr>
</tbody></table>
<h3 id="1-3-10-省份表（base-province）"><a href="#1-3-10-省份表（base-province）" class="headerlink" title="1.3.10 省份表（base_province）"></a>1.3.10 省份表（base_province）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>id</td>
</tr>
<tr>
<td><em><strong>*name*</strong></em></td>
<td>省名称</td>
</tr>
<tr>
<td><em><strong>*region_id*</strong></em></td>
<td>大区id</td>
</tr>
<tr>
<td><em><strong>*area_code*</strong></em></td>
<td>行政区位码</td>
</tr>
<tr>
<td><em><strong>*iso_code*</strong></em></td>
<td>国际编码</td>
</tr>
<tr>
<td><em><strong>*iso_3166_2*</strong></em></td>
<td>ISO3166编码</td>
</tr>
</tbody></table>
<h3 id="1-3-11-地区表（base-region）"><a href="#1-3-11-地区表（base-region）" class="headerlink" title="1.3.11 地区表（base_region）"></a>1.3.11 地区表（base_region）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>大区id</td>
</tr>
<tr>
<td><em><strong>*region_name*</strong></em></td>
<td>大区名称</td>
</tr>
</tbody></table>
<h3 id="1-3-12-品牌表（base-trademark）"><a href="#1-3-12-品牌表（base-trademark）" class="headerlink" title="1.3.12 品牌表（base_trademark）"></a>1.3.12 品牌表（base_trademark）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>编号</td>
</tr>
<tr>
<td><em><strong>*tm_name*</strong></em></td>
<td>属性值</td>
</tr>
<tr>
<td><em><strong>*logo_url*</strong></em></td>
<td>品牌logo的图片路径</td>
</tr>
</tbody></table>
<h3 id="1-3-13-购物车表（cart-info）"><a href="#1-3-13-购物车表（cart-info）" class="headerlink" title="1.3.13 购物车表（cart_info）"></a>1.3.13 购物车表（cart_info）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>编号</td>
</tr>
<tr>
<td><em><strong>*user_id*</strong></em></td>
<td>用户id</td>
</tr>
<tr>
<td><em><strong>*sku_id*</strong></em></td>
<td>skuid</td>
</tr>
<tr>
<td><em><strong>*cart_price*</strong></em></td>
<td>放入购物车时价格</td>
</tr>
<tr>
<td><em><strong>*sku_num*</strong></em></td>
<td>数量</td>
</tr>
<tr>
<td><em><strong>*img_url*</strong></em></td>
<td>图片文件</td>
</tr>
<tr>
<td><em><strong>*sku_name*</strong></em></td>
<td>sku名称 (冗余)</td>
</tr>
<tr>
<td><em><strong>*is_checked*</strong></em></td>
<td>是否已经下单</td>
</tr>
<tr>
<td><em><strong>*create_time*</strong></em></td>
<td>创建时间</td>
</tr>
<tr>
<td><em><strong>*operate_time*</strong></em></td>
<td>修改时间</td>
</tr>
<tr>
<td><em><strong>*is_ordered*</strong></em></td>
<td>是否已经下单</td>
</tr>
<tr>
<td><em><strong>*order_time*</strong></em></td>
<td>下单时间</td>
</tr>
<tr>
<td><em><strong>*source_type*</strong></em></td>
<td>来源类型</td>
</tr>
<tr>
<td><em><strong>*source_id*</strong></em></td>
<td>来源编号</td>
</tr>
</tbody></table>
<h3 id="1-3-14-评价表（comment-info）"><a href="#1-3-14-评价表（comment-info）" class="headerlink" title="1.3.14 评价表（comment_info）"></a>1.3.14 评价表（comment_info）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>编号</td>
</tr>
<tr>
<td><em><strong>*user_id*</strong></em></td>
<td>用户id</td>
</tr>
<tr>
<td><em><strong>*nick_name*</strong></em></td>
<td>用户昵称</td>
</tr>
<tr>
<td><em><strong>*head_img*</strong></em></td>
<td>图片</td>
</tr>
<tr>
<td><em><strong>*sku_id*</strong></em></td>
<td>商品sku_id</td>
</tr>
<tr>
<td><em><strong>*spu_id*</strong></em></td>
<td>商品spu_id</td>
</tr>
<tr>
<td><em><strong>*order_id*</strong></em></td>
<td>订单编号</td>
</tr>
<tr>
<td><em><strong>*appraise*</strong></em></td>
<td>评价 1 好评 2 中评 3 差评</td>
</tr>
<tr>
<td><em><strong>*comment_txt*</strong></em></td>
<td>评价内容</td>
</tr>
<tr>
<td><em><strong>*create_time*</strong></em></td>
<td>创建时间</td>
</tr>
<tr>
<td><em><strong>*operate_time*</strong></em></td>
<td>修改时间</td>
</tr>
</tbody></table>
<h3 id="1-3-15-优惠券信息表（coupon-info）"><a href="#1-3-15-优惠券信息表（coupon-info）" class="headerlink" title="1.3.15 优惠券信息表（coupon_info）"></a>1.3.15 优惠券信息表（coupon_info）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>购物券编号</td>
</tr>
<tr>
<td><em><strong>*coupon_name*</strong></em></td>
<td>购物券名称</td>
</tr>
<tr>
<td><em><strong>*coupon_type*</strong></em></td>
<td>购物券类型 1 现金券 2 折扣券 3 满减券 4 满件打折券</td>
</tr>
<tr>
<td><em><strong>*condition_amount*</strong></em></td>
<td>满额数（3）</td>
</tr>
<tr>
<td><em><strong>*condition_num*</strong></em></td>
<td>满件数（4）</td>
</tr>
<tr>
<td><em><strong>*activity_id*</strong></em></td>
<td>活动编号</td>
</tr>
<tr>
<td><em><strong>*benefit_amount*</strong></em></td>
<td>减金额（1 3）</td>
</tr>
<tr>
<td><em><strong>*benefit_discount*</strong></em></td>
<td>折扣（2 4）</td>
</tr>
<tr>
<td><em><strong>*create_time*</strong></em></td>
<td>创建时间</td>
</tr>
<tr>
<td><em><strong>*range_type*</strong></em></td>
<td>范围类型 1、商品(spuid) 2、品类(三级分类id) 3、品牌</td>
</tr>
<tr>
<td><em><strong>*limit_num*</strong></em></td>
<td>最多领用次数</td>
</tr>
<tr>
<td><em><strong>*taken_count*</strong></em></td>
<td>已领用次数</td>
</tr>
<tr>
<td><em><strong>*start_time*</strong></em></td>
<td>可以领取的开始日期</td>
</tr>
<tr>
<td><em><strong>*end_time*</strong></em></td>
<td>可以领取的结束日期</td>
</tr>
<tr>
<td><em><strong>*operate_time*</strong></em></td>
<td>修改时间</td>
</tr>
<tr>
<td><em><strong>*expire_time*</strong></em></td>
<td>过期时间</td>
</tr>
<tr>
<td><em><strong>*range_desc*</strong></em></td>
<td>范围描述</td>
</tr>
</tbody></table>
<h3 id="1-3-16-优惠券优惠范围表（coupon-range）"><a href="#1-3-16-优惠券优惠范围表（coupon-range）" class="headerlink" title="1.3.16 优惠券优惠范围表（coupon_range）"></a>1.3.16 优惠券优惠范围表（coupon_range）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>购物券编号</td>
</tr>
<tr>
<td><em><strong>*coupon_id*</strong></em></td>
<td>优惠券id</td>
</tr>
<tr>
<td><em><strong>*range_type*</strong></em></td>
<td>范围类型 1、商品(spuid) 2、品类(三级分类id) 3、品牌</td>
</tr>
<tr>
<td><em><strong>*range_id*</strong></em></td>
<td>范围id</td>
</tr>
</tbody></table>
<h3 id="1-3-17-优惠券领用表（coupon-use）"><a href="#1-3-17-优惠券领用表（coupon-use）" class="headerlink" title="1.3.17 优惠券领用表（coupon_use）"></a>1.3.17 优惠券领用表（coupon_use）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>编号</td>
</tr>
<tr>
<td><em><strong>*coupon_id*</strong></em></td>
<td>购物券ID</td>
</tr>
<tr>
<td><em><strong>*user_id*</strong></em></td>
<td>用户ID</td>
</tr>
<tr>
<td><em><strong>*order_id*</strong></em></td>
<td>订单ID</td>
</tr>
<tr>
<td><em><strong>*coupon_status*</strong></em></td>
<td>购物券状态（1：未使用 2：已使用）</td>
</tr>
<tr>
<td><em><strong>*get_time*</strong></em></td>
<td>获取时间</td>
</tr>
<tr>
<td><em><strong>*using_time*</strong></em></td>
<td>使用时间</td>
</tr>
<tr>
<td><em><strong>*used_time*</strong></em></td>
<td>支付时间</td>
</tr>
<tr>
<td><em><strong>*expire_time*</strong></em></td>
<td>过期时间</td>
</tr>
</tbody></table>
<h3 id="1-3-18-收藏表（favor-info）"><a href="#1-3-18-收藏表（favor-info）" class="headerlink" title="1.3.18 收藏表（favor_info）"></a>1.3.18 收藏表（favor_info）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>编号</td>
</tr>
<tr>
<td><em><strong>*user_id*</strong></em></td>
<td>用户id</td>
</tr>
<tr>
<td><em><strong>*sku_id*</strong></em></td>
<td>skuid</td>
</tr>
<tr>
<td><em><strong>*spu_id*</strong></em></td>
<td>商品id</td>
</tr>
<tr>
<td><em><strong>*is_cancel*</strong></em></td>
<td>是否已取消 0 正常 1 已取消</td>
</tr>
<tr>
<td><em><strong>*create_time*</strong></em></td>
<td>创建时间</td>
</tr>
<tr>
<td><em><strong>*cancel_time*</strong></em></td>
<td>修改时间</td>
</tr>
</tbody></table>
<h3 id="1-3-19-订单明细表（order-detail）"><a href="#1-3-19-订单明细表（order-detail）" class="headerlink" title="1.3.19 订单明细表（order_detail）"></a>1.3.19 订单明细表（order_detail）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>编号</td>
</tr>
<tr>
<td><em><strong>*order_id*</strong></em></td>
<td>订单编号</td>
</tr>
<tr>
<td><em><strong>*sku_id*</strong></em></td>
<td>sku_id</td>
</tr>
<tr>
<td><em><strong>*sku_name*</strong></em></td>
<td>sku名称（冗余)</td>
</tr>
<tr>
<td><em><strong>*img_url*</strong></em></td>
<td>图片名称（冗余)</td>
</tr>
<tr>
<td><em><strong>*order_price*</strong></em></td>
<td>购买价格(下单时sku价格）</td>
</tr>
<tr>
<td><em><strong>*sku_num*</strong></em></td>
<td>购买个数</td>
</tr>
<tr>
<td><em><strong>*create_time*</strong></em></td>
<td>创建时间</td>
</tr>
<tr>
<td><em><strong>*source_type*</strong></em></td>
<td>来源类型</td>
</tr>
<tr>
<td><em><strong>*source_id*</strong></em></td>
<td>来源编号</td>
</tr>
<tr>
<td><em><strong>*split_total_amount*</strong></em></td>
<td>分摊总金额</td>
</tr>
<tr>
<td><em><strong>*split_activity_amount*</strong></em></td>
<td>分摊活动减免金额</td>
</tr>
<tr>
<td><em><strong>*split_coupon_amount*</strong></em></td>
<td>分摊优惠券减免金额</td>
</tr>
</tbody></table>
<h3 id="1-3-20-订单明细活动关联表（order-detail-activity）"><a href="#1-3-20-订单明细活动关联表（order-detail-activity）" class="headerlink" title="1.3.20 订单明细活动关联表（order_detail_activity）"></a>1.3.20 订单明细活动关联表（order_detail_activity）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>编号</td>
</tr>
<tr>
<td><em><strong>*order_id*</strong></em></td>
<td>订单id</td>
</tr>
<tr>
<td><em><strong>*order_detail_id*</strong></em></td>
<td>订单明细id</td>
</tr>
<tr>
<td><em><strong>*activity_id*</strong></em></td>
<td>活动ID</td>
</tr>
<tr>
<td><em><strong>*activity_rule_id*</strong></em></td>
<td>活动规则</td>
</tr>
<tr>
<td><em><strong>*sku_id*</strong></em></td>
<td>skuID</td>
</tr>
<tr>
<td><em><strong>*create_time*</strong></em></td>
<td>获取时间</td>
</tr>
</tbody></table>
<h3 id="1-3-21-订单明细优惠券关联表（order-detail-coupon）"><a href="#1-3-21-订单明细优惠券关联表（order-detail-coupon）" class="headerlink" title="1.3.21 订单明细优惠券关联表（order_detail_coupon）"></a>1.3.21 订单明细优惠券关联表（order_detail_coupon）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>编号</td>
</tr>
<tr>
<td><em><strong>*order_id*</strong></em></td>
<td>订单id</td>
</tr>
<tr>
<td><em><strong>*order_detail_id*</strong></em></td>
<td>订单明细id</td>
</tr>
<tr>
<td><em><strong>*coupon_id*</strong></em></td>
<td>购物券ID</td>
</tr>
<tr>
<td><em><strong>*coupon_use_id*</strong></em></td>
<td>购物券领用id</td>
</tr>
<tr>
<td><em><strong>*sku_id*</strong></em></td>
<td>skuID</td>
</tr>
<tr>
<td><em><strong>*create_time*</strong></em></td>
<td>获取时间</td>
</tr>
</tbody></table>
<h3 id="1-3-22-订单表-order-info）"><a href="#1-3-22-订单表-order-info）" class="headerlink" title="1.3.22 订单表(order_info）"></a>1.3.22 订单表(order_info）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>编号</td>
</tr>
<tr>
<td><em><strong>*consignee*</strong></em></td>
<td>收货人</td>
</tr>
<tr>
<td><em><strong>*consignee_tel*</strong></em></td>
<td>收件人电话</td>
</tr>
<tr>
<td><em><strong>*total_amount*</strong></em></td>
<td>总金额</td>
</tr>
<tr>
<td><em><strong>*order_status*</strong></em></td>
<td>订单状态</td>
</tr>
<tr>
<td><em><strong>*user_id*</strong></em></td>
<td>用户id</td>
</tr>
<tr>
<td><em><strong>*payment_way*</strong></em></td>
<td>付款方式</td>
</tr>
<tr>
<td><em><strong>*delivery_address*</strong></em></td>
<td>送货地址</td>
</tr>
<tr>
<td><em><strong>*order_comment*</strong></em></td>
<td>订单备注</td>
</tr>
<tr>
<td><em><strong>*out_trade_no*</strong></em></td>
<td>订单交易编号（第三方支付用)</td>
</tr>
<tr>
<td><em><strong>*trade_body*</strong></em></td>
<td>订单描述(第三方支付用)</td>
</tr>
<tr>
<td><em><strong>*create_time*</strong></em></td>
<td>创建时间</td>
</tr>
<tr>
<td><em><strong>*operate_time*</strong></em></td>
<td>操作时间</td>
</tr>
<tr>
<td><em><strong>*expire_time*</strong></em></td>
<td>失效时间</td>
</tr>
<tr>
<td><em><strong>*process_status*</strong></em></td>
<td>进度状态</td>
</tr>
<tr>
<td><em><strong>*tracking_no*</strong></em></td>
<td>物流单编号</td>
</tr>
<tr>
<td><em><strong>*parent_order_id*</strong></em></td>
<td>父订单编号</td>
</tr>
<tr>
<td><em><strong>*img_url*</strong></em></td>
<td>图片路径</td>
</tr>
<tr>
<td><em><strong>*province_id*</strong></em></td>
<td>地区</td>
</tr>
<tr>
<td><em><strong>*activity_reduce_amount*</strong></em></td>
<td>促销金额</td>
</tr>
<tr>
<td><em><strong>*coupon_reduce_amount*</strong></em></td>
<td>优惠金额</td>
</tr>
<tr>
<td><em><strong>*original_total_amount*</strong></em></td>
<td>原价金额</td>
</tr>
<tr>
<td><em><strong>*feight_fee*</strong></em></td>
<td>运费</td>
</tr>
<tr>
<td><em><strong>*feight_fee_reduce*</strong></em></td>
<td>运费减免</td>
</tr>
<tr>
<td><em><strong>*refundable_time*</strong></em></td>
<td>可退款日期（签收后30天）</td>
</tr>
</tbody></table>
<h3 id="1-3-23-退单表（order-refund-info）"><a href="#1-3-23-退单表（order-refund-info）" class="headerlink" title="1.3.23 退单表（order_refund_info）"></a>1.3.23 退单表（order_refund_info）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>编号</td>
</tr>
<tr>
<td><em><strong>*user_id*</strong></em></td>
<td>用户id</td>
</tr>
<tr>
<td><em><strong>*order_id*</strong></em></td>
<td>订单id</td>
</tr>
<tr>
<td><em><strong>*sku_id*</strong></em></td>
<td>skuid</td>
</tr>
<tr>
<td><em><strong>*refund_type*</strong></em></td>
<td>退款类型</td>
</tr>
<tr>
<td><em><strong>*refund_num*</strong></em></td>
<td>退货件数</td>
</tr>
<tr>
<td><em><strong>*refund_amount*</strong></em></td>
<td>退款金额</td>
</tr>
<tr>
<td><em><strong>*refund_reason_type*</strong></em></td>
<td>原因类型</td>
</tr>
<tr>
<td><em><strong>*refund_reason_txt*</strong></em></td>
<td>原因内容</td>
</tr>
<tr>
<td><em><strong>*refund_status*</strong></em></td>
<td>退款状态（0：待审批 1：已退款）</td>
</tr>
<tr>
<td><em><strong>*create_time*</strong></em></td>
<td>创建时间</td>
</tr>
</tbody></table>
<h3 id="1-3-24-订单状态流水表（order-status-log）"><a href="#1-3-24-订单状态流水表（order-status-log）" class="headerlink" title="1.3.24 订单状态流水表（order_status_log）"></a>1.3.24 订单状态流水表（order_status_log）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>编号</td>
</tr>
<tr>
<td><em><strong>*order_id*</strong></em></td>
<td>订单编号</td>
</tr>
<tr>
<td><em><strong>*order_status*</strong></em></td>
<td>订单状态</td>
</tr>
<tr>
<td><em><strong>*operate_time*</strong></em></td>
<td>操作时间</td>
</tr>
</tbody></table>
<h3 id="1-3-25-支付表（payment-info）"><a href="#1-3-25-支付表（payment-info）" class="headerlink" title="1.3.25 支付表（payment_info）"></a>1.3.25 支付表（payment_info）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>编号</td>
</tr>
<tr>
<td><em><strong>*out_trade_no*</strong></em></td>
<td>对外业务编号</td>
</tr>
<tr>
<td><em><strong>*order_id*</strong></em></td>
<td>订单编号</td>
</tr>
<tr>
<td><em><strong>*user_id*</strong></em></td>
<td></td>
</tr>
<tr>
<td><em><strong>*payment_type*</strong></em></td>
<td>支付类型（微信 支付宝）</td>
</tr>
<tr>
<td><em><strong>*trade_no*</strong></em></td>
<td>交易编号</td>
</tr>
<tr>
<td><em><strong>*total_amount*</strong></em></td>
<td>支付金额</td>
</tr>
<tr>
<td><em><strong>*subject*</strong></em></td>
<td>交易内容</td>
</tr>
<tr>
<td><em><strong>*payment_status*</strong></em></td>
<td>支付状态</td>
</tr>
<tr>
<td><em><strong>*create_time*</strong></em></td>
<td>创建时间</td>
</tr>
<tr>
<td><em><strong>*callback_time*</strong></em></td>
<td>回调时间</td>
</tr>
<tr>
<td><em><strong>*callback_content*</strong></em></td>
<td>回调信息</td>
</tr>
</tbody></table>
<h3 id="1-3-26-退款表（refund-payment）"><a href="#1-3-26-退款表（refund-payment）" class="headerlink" title="1.3.26 退款表（refund_payment）"></a>1.3.26 退款表（refund_payment）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>编号</td>
</tr>
<tr>
<td><em><strong>*out_trade_no*</strong></em></td>
<td>对外业务编号</td>
</tr>
<tr>
<td><em><strong>*order_id*</strong></em></td>
<td>订单编号</td>
</tr>
<tr>
<td><em><strong>*sku_id*</strong></em></td>
<td>商品sku_id</td>
</tr>
<tr>
<td><em><strong>*payment_type*</strong></em></td>
<td>支付类型（微信 支付宝）</td>
</tr>
<tr>
<td><em><strong>*trade_no*</strong></em></td>
<td>交易编号</td>
</tr>
<tr>
<td><em><strong>*total_amount*</strong></em></td>
<td>退款金额</td>
</tr>
<tr>
<td><em><strong>*subject*</strong></em></td>
<td>交易内容</td>
</tr>
<tr>
<td><em><strong>*refund_status*</strong></em></td>
<td>退款状态</td>
</tr>
<tr>
<td><em><strong>*create_time*</strong></em></td>
<td>创建时间</td>
</tr>
<tr>
<td><em><strong>*callback_time*</strong></em></td>
<td>回调时间</td>
</tr>
<tr>
<td><em><strong>*callback_content*</strong></em></td>
<td>回调信息</td>
</tr>
</tbody></table>
<h3 id="1-3-27-SKU平台属性表（sku-attr-value）"><a href="#1-3-27-SKU平台属性表（sku-attr-value）" class="headerlink" title="1.3.27 SKU平台属性表（sku_attr_value）"></a>1.3.27 SKU平台属性表（sku_attr_value）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>编号</td>
</tr>
<tr>
<td><em><strong>*attr_id*</strong></em></td>
<td>属性id（冗余)</td>
</tr>
<tr>
<td><em><strong>*value_id*</strong></em></td>
<td>属性值id</td>
</tr>
<tr>
<td><em><strong>*sku_id*</strong></em></td>
<td>skuid</td>
</tr>
<tr>
<td><em><strong>*attr_name*</strong></em></td>
<td>属性名称</td>
</tr>
<tr>
<td><em><strong>*value_name*</strong></em></td>
<td>属性值名称</td>
</tr>
</tbody></table>
<h3 id="1-3-28-SKU信息表（sku-info）"><a href="#1-3-28-SKU信息表（sku-info）" class="headerlink" title="1.3.28 SKU信息表（sku_info）"></a>1.3.28 SKU信息表（sku_info）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>库存id(itemID)</td>
</tr>
<tr>
<td><em><strong>*spu_id*</strong></em></td>
<td>商品id</td>
</tr>
<tr>
<td><em><strong>*price*</strong></em></td>
<td>价格</td>
</tr>
<tr>
<td><em><strong>*sku_name*</strong></em></td>
<td>sku名称</td>
</tr>
<tr>
<td><em><strong>*sku_desc*</strong></em></td>
<td>商品规格描述</td>
</tr>
<tr>
<td><em><strong>*weight*</strong></em></td>
<td>重量</td>
</tr>
<tr>
<td><em><strong>*tm_id*</strong></em></td>
<td>品牌(冗余)</td>
</tr>
<tr>
<td><em><strong>*category3_id*</strong></em></td>
<td>三级分类id（冗余)</td>
</tr>
<tr>
<td><em><strong>*sku_default_img*</strong></em></td>
<td>默认显示图片(冗余)</td>
</tr>
<tr>
<td><em><strong>*is_sale*</strong></em></td>
<td>是否销售（1：是 0：否）</td>
</tr>
<tr>
<td><em><strong>*create_time*</strong></em></td>
<td>创建时间</td>
</tr>
</tbody></table>
<h3 id="1-3-29-SKU销售属性表（sku-sale-attr-value）"><a href="#1-3-29-SKU销售属性表（sku-sale-attr-value）" class="headerlink" title="1.3.29 SKU销售属性表（sku_sale_attr_value）"></a>1.3.29 SKU销售属性表（sku_sale_attr_value）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>id</td>
</tr>
<tr>
<td><em><strong>*sku_id*</strong></em></td>
<td>库存单元id</td>
</tr>
<tr>
<td><em><strong>*spu_id*</strong></em></td>
<td>spu_id（冗余）</td>
</tr>
<tr>
<td><em><strong>*sale_attr_value_id*</strong></em></td>
<td>销售属性值id</td>
</tr>
<tr>
<td><em><strong>*sale_attr_id*</strong></em></td>
<td>销售属性id</td>
</tr>
<tr>
<td><em><strong>*sale_attr_name*</strong></em></td>
<td>销售属性值名称</td>
</tr>
<tr>
<td><em><strong>*sale_attr_value_name*</strong></em></td>
<td>销售属性值名称</td>
</tr>
</tbody></table>
<h3 id="1-3-30-SPU信息表（spu-info）"><a href="#1-3-30-SPU信息表（spu-info）" class="headerlink" title="1.3.30 SPU信息表（spu_info）"></a>1.3.30 SPU信息表（spu_info）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>商品id</td>
</tr>
<tr>
<td><em><strong>*spu_name*</strong></em></td>
<td>商品名称</td>
</tr>
<tr>
<td><em><strong>*description*</strong></em></td>
<td>商品描述(后台简述）</td>
</tr>
<tr>
<td><em><strong>*category3_id*</strong></em></td>
<td>三级分类id</td>
</tr>
<tr>
<td><em><strong>*tm_id*</strong></em></td>
<td>品牌id</td>
</tr>
</tbody></table>
<h3 id="1-3-31-SPU销售属性表（spu-sale-attr）"><a href="#1-3-31-SPU销售属性表（spu-sale-attr）" class="headerlink" title="1.3.31 SPU销售属性表（spu_sale_attr）"></a>1.3.31 SPU销售属性表（spu_sale_attr）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>编号（业务中无关联）</td>
</tr>
<tr>
<td><em><strong>*spu_id*</strong></em></td>
<td>商品id</td>
</tr>
<tr>
<td><em><strong>*base_sale_attr_id*</strong></em></td>
<td>销售属性id</td>
</tr>
<tr>
<td><em><strong>*sale_attr_name*</strong></em></td>
<td>销售属性名称（冗余）</td>
</tr>
</tbody></table>
<h3 id="1-3-32-SPU销售属性值表（spu-sale-attr-value）"><a href="#1-3-32-SPU销售属性值表（spu-sale-attr-value）" class="headerlink" title="1.3.32 SPU销售属性值表（spu_sale_attr_value）"></a>1.3.32 SPU销售属性值表（spu_sale_attr_value）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>销售属性值编号</td>
</tr>
<tr>
<td><em><strong>*spu_id*</strong></em></td>
<td>商品id</td>
</tr>
<tr>
<td><em><strong>*base_sale_attr_id*</strong></em></td>
<td>销售属性id</td>
</tr>
<tr>
<td><em><strong>*sale_attr_value_name*</strong></em></td>
<td>销售属性值名称</td>
</tr>
<tr>
<td><em><strong>*sale_attr_name*</strong></em></td>
<td>销售属性名称（冗余）</td>
</tr>
</tbody></table>
<h3 id="1-3-33-用户地址表（user-address）"><a href="#1-3-33-用户地址表（user-address）" class="headerlink" title="1.3.33 用户地址表（user_address）"></a>1.3.33 用户地址表（user_address）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>编号</td>
</tr>
<tr>
<td><em><strong>*user_id*</strong></em></td>
<td>用户id</td>
</tr>
<tr>
<td><em><strong>*province_id*</strong></em></td>
<td>省份id</td>
</tr>
<tr>
<td><em><strong>*user_address*</strong></em></td>
<td>用户地址</td>
</tr>
<tr>
<td><em><strong>*consignee*</strong></em></td>
<td>收件人</td>
</tr>
<tr>
<td><em><strong>*phone_num*</strong></em></td>
<td>联系方式</td>
</tr>
<tr>
<td><em><strong>*is_default*</strong></em></td>
<td>是否是默认</td>
</tr>
</tbody></table>
<h3 id="1-3-34-用户信息表（user-info）"><a href="#1-3-34-用户信息表（user-info）" class="headerlink" title="1.3.34 用户信息表（user_info）"></a>1.3.34 用户信息表（user_info）</h3><table>
<thead>
<tr>
<th><em><strong>*字段名*</strong></em></th>
<th><em><strong>*字段说明*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td><em><strong>*id*</strong></em></td>
<td>编号</td>
</tr>
<tr>
<td><em><strong>*login_name*</strong></em></td>
<td>用户名称</td>
</tr>
<tr>
<td><em><strong>*nick_name*</strong></em></td>
<td>用户昵称</td>
</tr>
<tr>
<td><em><strong>*passwd*</strong></em></td>
<td>用户密码</td>
</tr>
<tr>
<td><em><strong>*name*</strong></em></td>
<td>用户姓名</td>
</tr>
<tr>
<td><em><strong>*phone_num*</strong></em></td>
<td>手机号</td>
</tr>
<tr>
<td><em><strong>*email*</strong></em></td>
<td>邮箱</td>
</tr>
<tr>
<td><em><strong>*head_img*</strong></em></td>
<td>头像</td>
</tr>
<tr>
<td><em><strong>*user_level*</strong></em></td>
<td>用户级别</td>
</tr>
<tr>
<td><em><strong>*birthday*</strong></em></td>
<td>用户生日</td>
</tr>
<tr>
<td><em><strong>*gender*</strong></em></td>
<td>性别 M男,F女</td>
</tr>
<tr>
<td><em><strong>*create_time*</strong></em></td>
<td>创建时间</td>
</tr>
<tr>
<td><em><strong>*operate_time*</strong></em></td>
<td>修改时间</td>
</tr>
<tr>
<td><em><strong>*status*</strong></em></td>
<td>状态</td>
</tr>
</tbody></table>
<h1 id="第2章-业务数据采集模块"><a href="#第2章-业务数据采集模块" class="headerlink" title="第2章 业务数据采集模块"></a>第2章 业务数据采集模块</h1><h2 id="2-1-MySQL安装"><a href="#2-1-MySQL安装" class="headerlink" title="2.1 MySQL安装"></a>2.1 MySQL安装</h2><h3 id="2-1-1-安装包准备"><a href="#2-1-1-安装包准备" class="headerlink" title="2.1.1 安装包准备"></a>2.1.1 安装包准备</h3><p>1）将安装包和JDBC驱动上传到/opt/software，共计6个<br>01_mysql-community-common-5.7.16-1.el7.x86_64.rpm<br>02_mysql-community-libs-5.7.16-1.el7.x86_64.rpm<br>03_mysql-community-libs-compat-5.7.16-1.el7.x86_64.rpm<br>04_mysql-community-client-5.7.16-1.el7.x86_64.rpm<br>05_mysql-community-server-5.7.16-1.el7.x86_64.rpm<br>mysql-connector-java-5.1.27-bin.jar<br>2）如果是虚拟机按照如下步骤执行<br>（1）卸载自带的Mysql-libs（如果之前安装过MySQL，要全都卸载掉）</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 software]$ rpm -qa | grep -i -E mysql\|mariadb | xargs -n1 sudo rpm -e --nodeps
</code></pre>
<p>3）如果是阿里云服务器按照如下步骤执行<br>说明：由于阿里云服务器安装的是Linux最小系统版，没有如下工具，所以需要安装。<br>（1）卸载MySQL依赖，虽然机器上没有装MySQL，但是这一步不可少</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 software]# sudo yum remove mysql-libs
</code></pre>
<p>（2）下载依赖并安装</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 software]# sudo yum install libaio
[atguigu@hadoop102 software]# sudo yum -y install autoconf
</code></pre>
<h3 id="2-1-2-安装MySQL"><a href="#2-1-2-安装MySQL" class="headerlink" title="2.1.2 安装MySQL"></a>2.1.2 安装MySQL</h3><p>1）安装MySQL依赖</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 software]$ sudo rpm -ivh 01_mysql-community-common-5.7.16-1.el7.x86_64.rpm
[atguigu@hadoop102 software]$ sudo rpm -ivh 02_mysql-community-libs-5.7.16-1.el7.x86_64.rpm
[atguigu@hadoop102 software]$ sudo rpm -ivh 03_mysql-community-libs-compat-5.7.16-1.el7.x86_64.rpm
</code></pre>
<p>2）安装mysql-client</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 software]$ sudo rpm -ivh 04_mysql-community-client-5.7.16-1.el7.x86_64.rpm
</code></pre>
<p>3）安装mysql-server</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 software]$ sudo rpm -ivh 05_mysql-community-server-5.7.16-1.el7.x86_64.rpm
</code></pre>
<p>注意：如果报如下错误，这是由于yum安装了旧版本的GPG keys所造成，从rpm版本4.1后，在安装或升级软件包时会自动检查软件包的签名。<br>warning: 05_mysql-community-server-5.7.16-1.el7.x86_64.rpm: Header V3 DSA/SHA1 Signature, key ID 5072e1f5: NOKEY<br>error: Failed dependencies:<br>libaio.so.1()(64bit) is needed by mysql-community-server-5.7.16-1.el7.x86_64<br>解决办法</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 software]$ sudo rpm -ivh 05_mysql-community-server-5.7.16-1.el7.x86_64.rpm --force --nodeps
</code></pre>
<p>4）启动MySQL</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 software]$ sudo systemctl start mysqld
</code></pre>
<p>5）查看MySQL密码</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 software]$ sudo cat /var/log/mysqld.log | grep password
</code></pre>
<h3 id="2-1-3-配置MySQL"><a href="#2-1-3-配置MySQL" class="headerlink" title="2.1.3 配置MySQL"></a>2.1.3 配置MySQL</h3><p>配置只要是root用户 + 密码，在任何主机上都能登录MySQL数据库。<br>1）用刚刚查到的密码进入MySQL（如果报错，给密码加单引号）</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 software]$ mysql -uroot -p'password'
</code></pre>
<p>2）设置复杂密码（由于MySQL密码策略，此密码必须足够复杂）</p>
<pre class=" language-shell"><code class="language-shell">mysql> set password=password("Qs23=zs32");
</code></pre>
<p>3）更改MySQL密码策略</p>
<pre class=" language-shell"><code class="language-shell">mysql> set global validate_password_length=4;
mysql> set global validate_password_policy=0;
</code></pre>
<p>4）设置简单好记的密码</p>
<pre class=" language-shell"><code class="language-shell">mysql> set password=password("000000");
</code></pre>
<p>5）进入MySQL库</p>
<pre class=" language-shell"><code class="language-shell">mysql> use mysql
</code></pre>
<p>6）查询user表</p>
<pre class=" language-shell"><code class="language-shell">mysql> select user, host from user;
</code></pre>
<p>7）修改user表，把Host表内容修改为%</p>
<pre class=" language-shell"><code class="language-shell">mysql> update user set host="%" where user="root";
</code></pre>
<p>8）刷新</p>
<pre class=" language-shell"><code class="language-shell">mysql> flush privileges;
</code></pre>
<p>9）退出</p>
<pre class=" language-shell"><code class="language-shell">mysql> quit;
</code></pre>
<h2 id="2-2-业务数据生成"><a href="#2-2-业务数据生成" class="headerlink" title="2.2 业务数据生成"></a>2.2 业务数据生成</h2><h3 id="2-2-1-连接MySQL"><a href="#2-2-1-连接MySQL" class="headerlink" title="2.2.1 连接MySQL"></a>2.2.1 连接MySQL</h3><p>通过MySQL可视化客户端连接数据库。</p>
<img src="/2022/02/06/41690/%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93.png" class title="This is an example image">

<h3 id="2-2-2-建表语句"><a href="#2-2-2-建表语句" class="headerlink" title="2.2.2 建表语句"></a>2.2.2 建表语句</h3><p>1）通过SQLyog创建数据库</p>
<img src="/2022/02/06/41690/%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93.png" class title="This is an example image">

<p>2）设置数据库名称为gmall，编码为utf-8，排序规则为utf8_general_ci</p>
<img src="/2022/02/06/41690/%E8%AE%BE%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D%E7%A7%B0.png" class title="This is an example image">

<p>3）导入数据库结构脚本（gmall.sql）</p>
<img src="/2022/02/06/41690/%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BB%93%E6%9E%84%E8%84%9A%E6%9C%AC.png" class title="This is an example image">

<p>注意：完成后，要记得右键，刷新一下对象浏览器，就可以看见数据库中的表了。</p>
<h3 id="2-2-3-生成业务数据"><a href="#2-2-3-生成业务数据" class="headerlink" title="2.2.3 生成业务数据"></a>2.2.3 生成业务数据</h3><p>1）在hadoop102的/opt/module/目录下创建db_log文件夹</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 module]$ mkdir db_log/
</code></pre>
<p>2）把gmall2020-mock-db-2021-01-22.jar和application.properties上传到hadoop102的/opt/module/db_log路径上。<br>3）根据需求修改application.properties相关配置</p>
<pre class=" language-properties"><code class="language-properties"><span class="token attr-name">logging.level.root</span><span class="token punctuation">=</span><span class="token attr-value">info</span>

<span class="token attr-name">spring.datasource.driver-class-name</span><span class="token punctuation">=</span><span class="token attr-value">com.mysql.jdbc.Driver</span>
<span class="token attr-name">spring.datasource.url</span><span class="token punctuation">=</span><span class="token attr-value">jdbc:mysql://hadoop102:3306/gmall?characterEncoding=utf-8&amp;useSSL=false&amp;serverTimezone=GMT%2B8</span>
<span class="token attr-name">spring.datasource.username</span><span class="token punctuation">=</span><span class="token attr-value">root</span>
<span class="token attr-name">spring.datasource.password</span><span class="token punctuation">=</span><span class="token attr-value">000000</span>

<span class="token attr-name">logging.pattern.console</span><span class="token punctuation">=</span><span class="token attr-value">%m%n</span>


<span class="token attr-name">mybatis-plus.global-config.db-config.field-strategy</span><span class="token punctuation">=</span><span class="token attr-value">not_null</span>


<span class="token comment" spellcheck="true">#业务日期</span>
<span class="token attr-name">mock.date</span><span class="token punctuation">=</span><span class="token attr-value">2020-06-14</span>
<span class="token comment" spellcheck="true">#是否重置  注意：第一次执行必须设置为1，后续不需要重置不用设置为1</span>
<span class="token attr-name">mock.clear</span><span class="token punctuation">=</span><span class="token attr-value">1</span>
<span class="token comment" spellcheck="true">#是否重置用户 注意：第一次执行必须设置为1，后续不需要重置不用设置为1</span>
<span class="token attr-name">mock.clear.user</span><span class="token punctuation">=</span><span class="token attr-value">1</span>

<span class="token comment" spellcheck="true">#生成新用户数量</span>
<span class="token attr-name">mock.user.count</span><span class="token punctuation">=</span><span class="token attr-value">100</span>
<span class="token comment" spellcheck="true">#男性比例</span>
<span class="token attr-name">mock.user.male-rate</span><span class="token punctuation">=</span><span class="token attr-value">20</span>
<span class="token comment" spellcheck="true">#用户数据变化概率</span>
<span class="token attr-name">mock.user.update-rate</span><span class="token punctuation">:</span><span class="token attr-value">20</span>

<span class="token comment" spellcheck="true">#收藏取消比例</span>
<span class="token attr-name">mock.favor.cancel-rate</span><span class="token punctuation">=</span><span class="token attr-value">10</span>
<span class="token comment" spellcheck="true">#收藏数量</span>
<span class="token attr-name">mock.favor.count</span><span class="token punctuation">=</span><span class="token attr-value">100</span>

<span class="token comment" spellcheck="true">#每个用户添加购物车的概率</span>
<span class="token attr-name">mock.cart.user-rate</span><span class="token punctuation">=</span><span class="token attr-value">50</span>
<span class="token comment" spellcheck="true">#每次每个用户最多添加多少种商品进购物车</span>
<span class="token attr-name">mock.cart.max-sku-count</span><span class="token punctuation">=</span><span class="token attr-value">8 </span>
<span class="token comment" spellcheck="true">#每个商品最多买几个</span>
<span class="token attr-name">mock.cart.max-sku-num</span><span class="token punctuation">=</span><span class="token attr-value">3 </span>

<span class="token comment" spellcheck="true">#购物车来源  用户查询，商品推广，智能推荐, 促销活动</span>
<span class="token attr-name">mock.cart.source-type-rate</span><span class="token punctuation">=</span><span class="token attr-value">60:20:10:10</span>

<span class="token comment" spellcheck="true">#用户下单比例</span>
<span class="token attr-name">mock.order.user-rate</span><span class="token punctuation">=</span><span class="token attr-value">50</span>
<span class="token comment" spellcheck="true">#用户从购物中购买商品比例</span>
<span class="token attr-name">mock.order.sku-rate</span><span class="token punctuation">=</span><span class="token attr-value">50</span>
<span class="token comment" spellcheck="true">#是否参加活动</span>
<span class="token attr-name">mock.order.join-activity</span><span class="token punctuation">=</span><span class="token attr-value">1</span>
<span class="token comment" spellcheck="true">#是否使用购物券</span>
<span class="token attr-name">mock.order.use-coupon</span><span class="token punctuation">=</span><span class="token attr-value">1</span>
<span class="token comment" spellcheck="true">#购物券领取人数</span>
<span class="token attr-name">mock.coupon.user-count</span><span class="token punctuation">=</span><span class="token attr-value">100</span>

<span class="token comment" spellcheck="true">#支付比例</span>
<span class="token attr-name">mock.payment.rate</span><span class="token punctuation">=</span><span class="token attr-value">70</span>
<span class="token comment" spellcheck="true">#支付方式 支付宝：微信 ：银联</span>
<span class="token attr-name">mock.payment.payment-type</span><span class="token punctuation">=</span><span class="token attr-value">30:60:10</span>

<span class="token comment" spellcheck="true">#评价比例 好：中：差：自动</span>
<span class="token attr-name">mock.comment.appraise-rate</span><span class="token punctuation">=</span><span class="token attr-value">30:10:10:50</span>

<span class="token comment" spellcheck="true">#退款原因比例：质量问题 商品描述与实际描述不一致 缺货 号码不合适 拍错 不想买了 其他</span>
<span class="token attr-name">mock.refund.reason-rate</span><span class="token punctuation">=</span><span class="token attr-value">30:10:20:5:15:5:5</span>
</code></pre>
<p>4）并在该目录下执行，如下命令，生成2020-06-14日期数据：</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 db_log]$ java -jar gmall2020-mock-db-2021-01-22.jar
</code></pre>
<p>5）查看gmall数据库，观察是否有2020-06-14的数据出现</p>
<h3 id="2-2-4-业务数据建模"><a href="#2-2-4-业务数据建模" class="headerlink" title="2.2.4 业务数据建模"></a>2.2.4 业务数据建模</h3><p>可借助EZDML这款数据库设计工具，来辅助我们梳理复杂的业务表关系。<br>1）下载地址<br><a target="_blank" rel="noopener" href="http://www.ezdml.com/download_cn.html">http://www.ezdml.com/download_cn.html</a><br>2）使用说明<br>（1）新建模型</p>
<img src="/2022/02/06/41690/%E6%96%B0%E5%BB%BA%E6%A8%A1%E5%9E%8B.png" class title="This is an example image">

<p>（2）命名模型</p>
<img src="/2022/02/06/41690/%E5%91%BD%E5%90%8D%E6%A8%A1%E5%9E%8B.png" class title="This is an example image">

<p>（3）点击图标，选中模型</p>
<img src="/2022/02/06/41690/%E9%80%89%E4%B8%AD%E6%A8%A1%E5%9E%8B.png" class title="This is an example image">

<p>（4）导入数据库</p>
<img src="/2022/02/06/41690/%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE%E5%BA%93.png" class title="This is an example image">

<p>（5）配置数据库连接</p>
<img src="/2022/02/06/41690/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5.png" class title="This is an example image">

<p>（6）选择导入的表（标注红点的表不需要导入）</p>
<img src="/2022/02/06/41690/%E9%80%89%E6%8B%A9%E5%AF%BC%E5%85%A5%E7%9A%84%E8%A1%A8.png" class title="This is an example image">

<p>（7）建立表关系<br>第一步：点击选中主表（主键所在的表）</p>
<img src="/2022/02/06/41690/%E9%80%89%E4%B8%AD%E4%B8%BB%E8%A1%A8.png" class title="This is an example image">

<p>第二步：点击连接按钮</p>
<img src="/2022/02/06/41690/%E7%82%B9%E5%87%BB%E8%BF%9E%E6%8E%A5.png" class title="This is an example image">

<p>第三步：点击从表，配置连接条件</p>
<img src="/2022/02/06/41690/%E7%82%B9%E5%87%BB%E4%BB%8E%E8%A1%A8.png" class title="This is an example image">

<p>第四步：效果展示</p>
<img src="/2022/02/06/41690/%E6%95%88%E6%9E%9C%E5%B1%95%E7%A4%BA.png" class title="This is an example image">

<p>3）使用技巧<br>（1）缩略图</p>
<img src="/2022/02/06/41690/%E7%BC%A9%E7%95%A5%E5%9B%BE.png" class title="This is an example image">

<p>（2）热键<br>按住shift键，用鼠标点击表，进行多选，可实现批量移动<br>按住ctrl键，用鼠标圈选表，也可进行多选，实现批量移动</p>
<h2 id="2-3-Sqoop安装"><a href="#2-3-Sqoop安装" class="headerlink" title="2.3 Sqoop安装"></a>2.3 Sqoop安装</h2><h3 id="2-3-1-下载并解压"><a href="#2-3-1-下载并解压" class="headerlink" title="2.3.1 下载并解压"></a>2.3.1 下载并解压</h3><p>1）sqoop官网地址：<a target="_blank" rel="noopener" href="http://sqoop.apache.org/">http://sqoop.apache.org</a><br>2）下载地址：<a target="_blank" rel="noopener" href="http://mirrors.hust.edu.cn/apache/sqoop/1.4.6/">http://mirrors.hust.edu.cn/apache/sqoop/1.4.6/</a><br>3）上传安装包sqoop-1.4.6.bin__hadoop-2.0.4-alpha.tar.gz到hadoop102的/opt/software路径中<br>4）解压sqoop安装包到指定目录，如：__</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 software]$ tar -zxf sqoop-1.4.6.bin__hadoop-2.0.4-alpha.tar.gz -C /opt/module/
</code></pre>
<p>5）解压sqoop安装包到指定目录，如：</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 module]$ mv sqoop-1.4.6.bin__hadoop-2.0.4-alpha/ sqoop
</code></pre>
<h3 id="2-3-2-修改配置文件"><a href="#2-3-2-修改配置文件" class="headerlink" title="2.3.2 修改配置文件"></a>2.3.2 修改配置文件</h3><p>1）进入到/opt/module/sqoop/conf目录，重命名配置文件</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 conf]$ mv sqoop-env-template.sh sqoop-env.sh
</code></pre>
<p>2）修改配置文件</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 conf]$ vim sqoop-env.sh 
</code></pre>
<p>增加如下内容</p>
<pre class=" language-sh"><code class="language-sh">export HADOOP_COMMON_HOME=/opt/module/hadoop-3.1.3
export HADOOP_MAPRED_HOME=/opt/module/hadoop-3.1.3
export HIVE_HOME=/opt/module/hive
export ZOOKEEPER_HOME=/opt/module/zookeeper-3.5.7
export ZOOCFGDIR=/opt/module/zookeeper-3.5.7/conf
</code></pre>
<p>2.3.3 拷贝JDBC驱动<br>1）将mysql-connector-java-5.1.48.jar 上传到/opt/software路径<br>2）进入到/opt/software/路径，拷贝jdbc驱动到sqoop的lib目录下。</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 software]$ cp mysql-connector-java-5.1.48.jar /opt/module/sqoop/lib/
</code></pre>
<h3 id="2-3-4-验证Sqoop"><a href="#2-3-4-验证Sqoop" class="headerlink" title="2.3.4 验证Sqoop"></a>2.3.4 验证Sqoop</h3><p>（1）我们可以通过某一个command来验证sqoop配置是否正确：<br>[atguigu@hadoop102 sqoop]$ bin/sqoop help<br>（2）出现一些Warning警告（警告信息已省略），并伴随着帮助命令的输出：<br>Available commands:<br>  codegen            Generate code to interact with database records<br>  create-hive-table     Import a table definition into Hive<br>  eval               Evaluate a SQL statement and display the results<br>  <strong>export             Export an HDFS directory to a database table</strong><br>  help               List available commands<br>  <strong>import             Import a table from a database to HDFS</strong><br>  import-all-tables     Import tables from a database to HDFS<br>  import-mainframe    Import datasets from a mainframe server to HDFS<br>  job                Work with saved jobs<br>  list-databases        List available databases on a server<br>  list-tables           List available tables in a database<br>  merge              Merge results of incremental imports<br>  metastore           Run a standalone Sqoop metastore<br>  version            Display version information</p>
<h3 id="2-3-5-测试Sqoop是否能够成功连接数据库"><a href="#2-3-5-测试Sqoop是否能够成功连接数据库" class="headerlink" title="2.3.5 测试Sqoop是否能够成功连接数据库"></a>2.3.5 测试Sqoop是否能够成功连接数据库</h3><pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 sqoop]$ bin/sqoop list-databases --connect jdbc:mysql://hadoop102:3306/ --username root --password 000000
</code></pre>
<p>出现如下输出：<br>information_schema<br>metastore<br>mysql<br>oozie<br>performance_schema</p>
<h3 id="2-3-6-Sqoop基本使用"><a href="#2-3-6-Sqoop基本使用" class="headerlink" title="2.3.6 Sqoop基本使用"></a>2.3.6 Sqoop基本使用</h3><p>将mysql中user_info表数据导入到HDFS的/test路径</p>
<pre class=" language-shell"><code class="language-shell">bin/sqoop import \
--connect jdbc:mysql://hadoop102:3306/gmall \
--username root \
--password 000000 \
--table user_info \
--columns id,login_name \
--where "id>=10 and id<=30" \
--target-dir /test \
--delete-target-dir \
--fields-terminated-by '\t' \
--num-mappers 2 \
--split-by id
</code></pre>
<h2 id="2-4-同步策略"><a href="#2-4-同步策略" class="headerlink" title="2.4 同步策略"></a>2.4 同步策略</h2><p>数据同步策略的类型包括：全量同步、增量同步、新增及变化同步、特殊情况<br>全量表：存储完整的数据。<br>增量表：存储新增加的数据。<br>新增及变化表：存储新增加的数据和变化的数据。<br>特殊表：只需要存储一次。</p>
<h3 id="2-4-1-全量同步策略"><a href="#2-4-1-全量同步策略" class="headerlink" title="2.4.1 全量同步策略"></a>2.4.1 全量同步策略</h3><img src="/2022/02/06/41690/%E5%85%A8%E9%87%8F%E5%90%8C%E6%AD%A5%E7%AD%96%E7%95%A5.png" class title="This is an example image">

<h3 id="2-4-2-增量同步策略"><a href="#2-4-2-增量同步策略" class="headerlink" title="2.4.2 增量同步策略"></a>2.4.2 增量同步策略</h3><img src="/2022/02/06/41690/%E5%A2%9E%E9%87%8F%E5%90%8C%E6%AD%A5%E7%AD%96%E7%95%A5.png" class title="This is an example image">

<h3 id="2-4-3-新增及变化策略"><a href="#2-4-3-新增及变化策略" class="headerlink" title="2.4.3 新增及变化策略"></a>2.4.3 新增及变化策略</h3><img src="/2022/02/06/41690/%E6%96%B0%E5%A2%9E%E5%8F%8A%E5%8F%98%E5%8C%96%E7%AD%96%E7%95%A5.png" class title="This is an example image">

<h3 id="2-4-4-特殊策略"><a href="#2-4-4-特殊策略" class="headerlink" title="2.4.4 特殊策略"></a>2.4.4 特殊策略</h3><p>某些特殊的表，可不必遵循上述同步策略。例如某些不会发生变化的表（地区表，省份表，民族表）可以只存一份固定值。</p>
<h2 id="2-5-业务数据导入HDFS"><a href="#2-5-业务数据导入HDFS" class="headerlink" title="2.5 业务数据导入HDFS"></a>2.5 业务数据导入HDFS</h2><h3 id="2-5-1-分析表同步策略"><a href="#2-5-1-分析表同步策略" class="headerlink" title="2.5.1 分析表同步策略"></a>2.5.1 分析表同步策略</h3><p>在生产环境，个别小公司，为了简单处理，所有表全量导入。<br>中大型公司，由于数据量比较大，还是严格按照同步策略导入数据。</p>
<img src="/2022/02/06/41690/%E5%88%86%E6%9E%90%E8%A1%A8%E5%90%8C%E6%AD%A5%E7%AD%96%E7%95%A5.png" class title="This is an example image">

<h3 id="2-5-2-业务数据首日同步脚本"><a href="#2-5-2-业务数据首日同步脚本" class="headerlink" title="2.5.2 业务数据首日同步脚本"></a>2.5.2 业务数据首日同步脚本</h3><p>1）脚本编写<br>（1）在/home/atguigu/bin目录下创建</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 bin]$ vim mysql_to_hdfs_init.sh
</code></pre>
<p>添加如下内容：</p>
<pre class=" language-sh"><code class="language-sh">#! /bin/bash

APP=gmall
sqoop=/opt/module/sqoop/bin/sqoop

if [ -n "$2" ] ;then
   do_date=$2
else 
   echo "请传入日期参数"
   exit
fi 

import_data(){
$sqoop import \
--connect jdbc:mysql://hadoop102:3306/$APP \
--username root \
--password 000000 \
--target-dir /origin_data/$APP/db/$1/$do_date \
--delete-target-dir \
--query "$2 where \$CONDITIONS" \
--num-mappers 1 \
--fields-terminated-by '\t' \
--compress \
--compression-codec lzop \
--null-string '\\N' \
--null-non-string '\\N'

hadoop jar /opt/module/hadoop-3.1.3/share/hadoop/common/hadoop-lzo-0.4.20.jar com.hadoop.compression.lzo.DistributedLzoIndexer /origin_data/$APP/db/$1/$do_date
}

import_order_info(){
  import_data order_info "select
                            id, 
                            total_amount, 
                            order_status, 
                            user_id, 
                            payment_way,
                            delivery_address,
                            out_trade_no, 
                            create_time, 
                            operate_time,
                            expire_time,
                            tracking_no,
                            province_id,
                            activity_reduce_amount,
                            coupon_reduce_amount,                            
                            original_total_amount,
                            feight_fee,
                            feight_fee_reduce      
                        from order_info"
}

import_coupon_use(){
  import_data coupon_use "select
                          id,
                          coupon_id,
                          user_id,
                          order_id,
                          coupon_status,
                          get_time,
                          using_time,
                          used_time,
                          expire_time
                        from coupon_use"
}

import_order_status_log(){
  import_data order_status_log "select
                                  id,
                                  order_id,
                                  order_status,
                                  operate_time
                                from order_status_log"
}

import_user_info(){
  import_data "user_info" "select 
                            id,
                            login_name,
                            nick_name,
                            name,
                            phone_num,
                            email,
                            user_level, 
                            birthday,
                            gender,
                            create_time,
                            operate_time
                          from user_info"
}

import_order_detail(){
  import_data order_detail "select 
                              id,
                              order_id, 
                              sku_id,
                              sku_name,
                              order_price,
                              sku_num, 
                              create_time,
                              source_type,
                              source_id,
                              split_total_amount,
                              split_activity_amount,
                              split_coupon_amount
                            from order_detail"
}

import_payment_info(){
  import_data "payment_info"  "select 
                                id,  
                                out_trade_no, 
                                order_id, 
                                user_id, 
                                payment_type, 
                                trade_no, 
                                total_amount,  
                                subject, 
                                payment_status,
                                create_time,
                                callback_time 
                              from payment_info"
}

import_comment_info(){
  import_data comment_info "select
                              id,
                              user_id,
                              sku_id,
                              spu_id,
                              order_id,
                              appraise,
                              create_time
                            from comment_info"
}

import_order_refund_info(){
  import_data order_refund_info "select
                                id,
                                user_id,
                                order_id,
                                sku_id,
                                refund_type,
                                refund_num,
                                refund_amount,
                                refund_reason_type,
                                refund_status,
                                create_time
                              from order_refund_info"
}

import_sku_info(){
  import_data sku_info "select 
                          id,
                          spu_id,
                          price,
                          sku_name,
                          sku_desc,
                          weight,
                          tm_id,
                          category3_id,
                          is_sale,
                          create_time
                        from sku_info"
}

import_base_category1(){
  import_data "base_category1" "select 
                                  id,
                                  name 
                                from base_category1"
}

import_base_category2(){
  import_data "base_category2" "select
                                  id,
                                  name,
                                  category1_id 
                                from base_category2"
}

import_base_category3(){
  import_data "base_category3" "select
                                  id,
                                  name,
                                  category2_id
                                from base_category3"
}

import_base_province(){
  import_data base_province "select
                              id,
                              name,
                              region_id,
                              area_code,
                              iso_code,
                              iso_3166_2
                            from base_province"
}

import_base_region(){
  import_data base_region "select
                              id,
                              region_name
                            from base_region"
}

import_base_trademark(){
  import_data base_trademark "select
                                id,
                                tm_name
                              from base_trademark"
}

import_spu_info(){
  import_data spu_info "select
                            id,
                            spu_name,
                            category3_id,
                            tm_id
                          from spu_info"
}

import_favor_info(){
  import_data favor_info "select
                          id,
                          user_id,
                          sku_id,
                          spu_id,
                          is_cancel,
                          create_time,
                          cancel_time
                        from favor_info"
}

import_cart_info(){
  import_data cart_info "select
                        id,
                        user_id,
                        sku_id,
                        cart_price,
                        sku_num,
                        sku_name,
                        create_time,
                        operate_time,
                        is_ordered,
                        order_time,
                        source_type,
                        source_id
                      from cart_info"
}

import_coupon_info(){
  import_data coupon_info "select
                          id,
                          coupon_name,
                          coupon_type,
                          condition_amount,
                          condition_num,
                          activity_id,
                          benefit_amount,
                          benefit_discount,
                          create_time,
                          range_type,
                          limit_num,
                          taken_count,
                          start_time,
                          end_time,
                          operate_time,
                          expire_time
                        from coupon_info"
}

import_activity_info(){
  import_data activity_info "select
                              id,
                              activity_name,
                              activity_type,
                              start_time,
                              end_time,
                              create_time
                            from activity_info"
}

import_activity_rule(){
    import_data activity_rule "select
                                    id,
                                    activity_id,
                                    activity_type,
                                    condition_amount,
                                    condition_num,
                                    benefit_amount,
                                    benefit_discount,
                                    benefit_level
                                from activity_rule"
}

import_base_dic(){
    import_data base_dic "select
                            dic_code,
                            dic_name,
                            parent_code,
                            create_time,
                            operate_time
                          from base_dic"
}


import_order_detail_activity(){
    import_data order_detail_activity "select
                                                                id,
                                                                order_id,
                                                                order_detail_id,
                                                                activity_id,
                                                                activity_rule_id,
                                                                sku_id,
                                                                create_time
                                                            from order_detail_activity"
}


import_order_detail_coupon(){
    import_data order_detail_coupon "select
                                                                id,
                                                                                order_id,
                                                                order_detail_id,
                                                                coupon_id,
                                                                coupon_use_id,
                                                                sku_id,
                                                                create_time
                                                            from order_detail_coupon"
}


import_refund_payment(){
    import_data refund_payment "select
                                                        id,
                                                        out_trade_no,
                                                        order_id,
                                                        sku_id,
                                                        payment_type,
                                                        trade_no,
                                                        total_amount,
                                                        subject,
                                                        refund_status,
                                                        create_time,
                                                        callback_time
                                                    from refund_payment"                                                    

}

import_sku_attr_value(){
    import_data sku_attr_value "select
                                                    id,
                                                    attr_id,
                                                    value_id,
                                                    sku_id,
                                                    attr_name,
                                                    value_name
                                                from sku_attr_value"
}


import_sku_sale_attr_value(){
    import_data sku_sale_attr_value "select
                                                            id,
                                                            sku_id,
                                                            spu_id,
                                                            sale_attr_value_id,
                                                            sale_attr_id,
                                                            sale_attr_name,
                                                            sale_attr_value_name
                                                        from sku_sale_attr_value"
}

case $1 in
  "order_info")
     import_order_info
;;
  "base_category1")
     import_base_category1
;;
  "base_category2")
     import_base_category2
;;
  "base_category3")
     import_base_category3
;;
  "order_detail")
     import_order_detail
;;
  "sku_info")
     import_sku_info
;;
  "user_info")
     import_user_info
;;
  "payment_info")
     import_payment_info
;;
  "base_province")
     import_base_province
;;
  "base_region")
     import_base_region
;;
  "base_trademark")
     import_base_trademark
;;
  "activity_info")
      import_activity_info
;;
  "cart_info")
      import_cart_info
;;
  "comment_info")
      import_comment_info
;;
  "coupon_info")
      import_coupon_info
;;
  "coupon_use")
      import_coupon_use
;;
  "favor_info")
      import_favor_info
;;
  "order_refund_info")
      import_order_refund_info
;;
  "order_status_log")
      import_order_status_log
;;
  "spu_info")
      import_spu_info
;;
  "activity_rule")
      import_activity_rule
;;
  "base_dic")
      import_base_dic
;;
  "order_detail_activity")
      import_order_detail_activity
;;
  "order_detail_coupon")
      import_order_detail_coupon
;;
  "refund_payment")
      import_refund_payment
;;
  "sku_attr_value")
      import_sku_attr_value
;;
  "sku_sale_attr_value")
      import_sku_sale_attr_value
;;
  "all")
   import_base_category1
   import_base_category2
   import_base_category3
   import_order_info
   import_order_detail
   import_sku_info
   import_user_info
   import_payment_info
   import_base_region
   import_base_province
   import_base_trademark
   import_activity_info
   import_cart_info
   import_comment_info
   import_coupon_use
   import_coupon_info
   import_favor_info
   import_order_refund_info
   import_order_status_log
   import_spu_info
   import_activity_rule
   import_base_dic
   import_order_detail_activity
   import_order_detail_coupon
   import_refund_payment
   import_sku_attr_value
   import_sku_sale_attr_value
;;
esac
</code></pre>
<p>说明1：<br>[ -n 变量值 ] 判断变量的值，是否为空<br>– 变量的值，非空，返回true<br>– 变量的值，为空，返回false<br>说明2：<br>查看date命令的使用，[atguigu@hadoop102 ~]$ date –help<br>（2）增加脚本执行权限<br>[atguigu@hadoop102 bin]$ chmod +x mysql_to_hdfs_init.sh<br>2）脚本使用<br>[atguigu@hadoop102 bin]$ mysql_to_hdfs_init.sh all 2020-06-14</p>
<h3 id="2-5-3-业务数据每日同步脚本"><a href="#2-5-3-业务数据每日同步脚本" class="headerlink" title="2.5.3 业务数据每日同步脚本"></a>2.5.3 业务数据每日同步脚本</h3><p>1）脚本编写<br>（1）在/home/atguigu/bin目录下创建</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 bin]$ vim mysql_to_hdfs.sh
</code></pre>
<p>添加如下内容：</p>
<pre class=" language-sh"><code class="language-sh">#! /bin/bash

APP=gmall
sqoop=/opt/module/sqoop/bin/sqoop

if [ -n "$2" ] ;then
    do_date=$2
else
    do_date=`date -d '-1 day' +%F`
fi

import_data(){
$sqoop import \
--connect jdbc:mysql://hadoop102:3306/$APP \
--username root \
--password 000000 \
--target-dir /origin_data/$APP/db/$1/$do_date \
--delete-target-dir \
--query "$2 and  \$CONDITIONS" \
--num-mappers 1 \
--fields-terminated-by '\t' \
--compress \
--compression-codec lzop \
--null-string '\\N' \
--null-non-string '\\N'

hadoop jar /opt/module/hadoop-3.1.3/share/hadoop/common/hadoop-lzo-0.4.20.jar com.hadoop.compression.lzo.DistributedLzoIndexer /origin_data/$APP/db/$1/$do_date
}

import_order_info(){
  import_data order_info "select
                            id, 
                            total_amount, 
                            order_status, 
                            user_id, 
                            payment_way,
                            delivery_address,
                            out_trade_no, 
                            create_time, 
                            operate_time,
                            expire_time,
                            tracking_no,
                            province_id,
                            activity_reduce_amount,
                            coupon_reduce_amount,                            
                            original_total_amount,
                            feight_fee,
                            feight_fee_reduce      
                        from order_info
                        where (date_format(create_time,'%Y-%m-%d')='$do_date' 
                        or date_format(operate_time,'%Y-%m-%d')='$do_date')"
}

import_coupon_use(){
  import_data coupon_use "select
                          id,
                          coupon_id,
                          user_id,
                          order_id,
                          coupon_status,
                          get_time,
                          using_time,
                          used_time,
                          expire_time
                        from coupon_use
                        where (date_format(get_time,'%Y-%m-%d')='$do_date'
                        or date_format(using_time,'%Y-%m-%d')='$do_date'
                        or date_format(used_time,'%Y-%m-%d')='$do_date'
                        or date_format(expire_time,'%Y-%m-%d')='$do_date')"
}

import_order_status_log(){
  import_data order_status_log "select
                                  id,
                                  order_id,
                                  order_status,
                                  operate_time
                                from order_status_log
                                where date_format(operate_time,'%Y-%m-%d')='$do_date'"
}

import_user_info(){
  import_data "user_info" "select 
                            id,
                            login_name,
                            nick_name,
                            name,
                            phone_num,
                            email,
                            user_level, 
                            birthday,
                            gender,
                            create_time,
                            operate_time
                          from user_info 
                          where (DATE_FORMAT(create_time,'%Y-%m-%d')='$do_date' 
                          or DATE_FORMAT(operate_time,'%Y-%m-%d')='$do_date')"
}

import_order_detail(){
  import_data order_detail "select 
                              id,
                              order_id, 
                              sku_id,
                              sku_name,
                              order_price,
                              sku_num, 
                              create_time,
                              source_type,
                              source_id,
                              split_total_amount,
                              split_activity_amount,
                              split_coupon_amount
                            from order_detail 
                            where DATE_FORMAT(create_time,'%Y-%m-%d')='$do_date'"
}

import_payment_info(){
  import_data "payment_info"  "select 
                                id,  
                                out_trade_no, 
                                order_id, 
                                user_id, 
                                payment_type, 
                                trade_no, 
                                total_amount,  
                                subject, 
                                payment_status,
                                create_time,
                                callback_time 
                              from payment_info 
                              where (DATE_FORMAT(create_time,'%Y-%m-%d')='$do_date' 
                              or DATE_FORMAT(callback_time,'%Y-%m-%d')='$do_date')"
}

import_comment_info(){
  import_data comment_info "select
                              id,
                              user_id,
                              sku_id,
                              spu_id,
                              order_id,
                              appraise,
                              create_time
                            from comment_info
                            where date_format(create_time,'%Y-%m-%d')='$do_date'"
}

import_order_refund_info(){
  import_data order_refund_info "select
                                id,
                                user_id,
                                order_id,
                                sku_id,
                                refund_type,
                                refund_num,
                                refund_amount,
                                refund_reason_type,
                                refund_status,
                                create_time
                              from order_refund_info
                              where date_format(create_time,'%Y-%m-%d')='$do_date'"
}

import_sku_info(){
  import_data sku_info "select 
                          id,
                          spu_id,
                          price,
                          sku_name,
                          sku_desc,
                          weight,
                          tm_id,
                          category3_id,
                          is_sale,
                          create_time
                        from sku_info where 1=1"
}

import_base_category1(){
  import_data "base_category1" "select 
                                  id,
                                  name 
                                from base_category1 where 1=1"
}

import_base_category2(){
  import_data "base_category2" "select
                                  id,
                                  name,
                                  category1_id 
                                from base_category2 where 1=1"
}

import_base_category3(){
  import_data "base_category3" "select
                                  id,
                                  name,
                                  category2_id
                                from base_category3 where 1=1"
}

import_base_province(){
  import_data base_province "select
                              id,
                              name,
                              region_id,
                              area_code,
                              iso_code,
                              iso_3166_2
                            from base_province
                            where 1=1"
}

import_base_region(){
  import_data base_region "select
                              id,
                              region_name
                            from base_region
                            where 1=1"
}

import_base_trademark(){
  import_data base_trademark "select
                                id,
                                tm_name
                              from base_trademark
                              where 1=1"
}

import_spu_info(){
  import_data spu_info "select
                            id,
                            spu_name,
                            category3_id,
                            tm_id
                          from spu_info
                          where 1=1"
}

import_favor_info(){
  import_data favor_info "select
                          id,
                          user_id,
                          sku_id,
                          spu_id,
                          is_cancel,
                          create_time,
                          cancel_time
                        from favor_info
                        where 1=1"
}

import_cart_info(){
  import_data cart_info "select
                        id,
                        user_id,
                        sku_id,
                        cart_price,
                        sku_num,
                        sku_name,
                        create_time,
                        operate_time,
                        is_ordered,
                        order_time,
                        source_type,
                        source_id
                      from cart_info
                      where 1=1"
}

import_coupon_info(){
  import_data coupon_info "select
                          id,
                          coupon_name,
                          coupon_type,
                          condition_amount,
                          condition_num,
                          activity_id,
                          benefit_amount,
                          benefit_discount,
                          create_time,
                          range_type,
                          limit_num,
                          taken_count,
                          start_time,
                          end_time,
                          operate_time,
                          expire_time
                        from coupon_info
                        where 1=1"
}

import_activity_info(){
  import_data activity_info "select
                              id,
                              activity_name,
                              activity_type,
                              start_time,
                              end_time,
                              create_time
                            from activity_info
                            where 1=1"
}

import_activity_rule(){
    import_data activity_rule "select
                                    id,
                                    activity_id,
                                    activity_type,
                                    condition_amount,
                                    condition_num,
                                    benefit_amount,
                                    benefit_discount,
                                    benefit_level
                                from activity_rule
                                where 1=1"
}

import_base_dic(){
    import_data base_dic "select
                            dic_code,
                            dic_name,
                            parent_code,
                            create_time,
                            operate_time
                          from base_dic
                          where 1=1"
}


import_order_detail_activity(){
    import_data order_detail_activity "select
                                                                id,
                                                                order_id,
                                                                order_detail_id,
                                                                activity_id,
                                                                activity_rule_id,
                                                                sku_id,
                                                                create_time
                                                            from order_detail_activity
                                                            where date_format(create_time,'%Y-%m-%d')='$do_date'"
}


import_order_detail_coupon(){
    import_data order_detail_coupon "select
                                                                id,
                                                                                order_id,
                                                                order_detail_id,
                                                                coupon_id,
                                                                coupon_use_id,
                                                                sku_id,
                                                                create_time
                                                            from order_detail_coupon
                                                            where date_format(create_time,'%Y-%m-%d')='$do_date'"
}


import_refund_payment(){
    import_data refund_payment "select
                                                        id,
                                                        out_trade_no,
                                                        order_id,
                                                        sku_id,
                                                        payment_type,
                                                        trade_no,
                                                        total_amount,
                                                        subject,
                                                        refund_status,
                                                        create_time,
                                                        callback_time
                                                    from refund_payment
                                                    where (DATE_FORMAT(create_time,'%Y-%m-%d')='$do_date' 
                                                    or DATE_FORMAT(callback_time,'%Y-%m-%d')='$do_date')"                                                    

}

import_sku_attr_value(){
    import_data sku_attr_value "select
                                                    id,
                                                    attr_id,
                                                    value_id,
                                                    sku_id,
                                                    attr_name,
                                                    value_name
                                                from sku_attr_value
                                                where 1=1"
}


import_sku_sale_attr_value(){
    import_data sku_sale_attr_value "select
                                                            id,
                                                            sku_id,
                                                            spu_id,
                                                            sale_attr_value_id,
                                                            sale_attr_id,
                                                            sale_attr_name,
                                                            sale_attr_value_name
                                                        from sku_sale_attr_value
                                                        where 1=1"
}

case $1 in
  "order_info")
     import_order_info
;;
  "base_category1")
     import_base_category1
;;
  "base_category2")
     import_base_category2
;;
  "base_category3")
     import_base_category3
;;
  "order_detail")
     import_order_detail
;;
  "sku_info")
     import_sku_info
;;
  "user_info")
     import_user_info
;;
  "payment_info")
     import_payment_info
;;
  "base_province")
     import_base_province
;;
  "activity_info")
      import_activity_info
;;
  "cart_info")
      import_cart_info
;;
  "comment_info")
      import_comment_info
;;
  "coupon_info")
      import_coupon_info
;;
  "coupon_use")
      import_coupon_use
;;
  "favor_info")
      import_favor_info
;;
  "order_refund_info")
      import_order_refund_info
;;
  "order_status_log")
      import_order_status_log
;;
  "spu_info")
      import_spu_info
;;
  "activity_rule")
      import_activity_rule
;;
  "base_dic")
      import_base_dic
;;
  "order_detail_activity")
      import_order_detail_activity
;;
  "order_detail_coupon")
      import_order_detail_coupon
;;
  "refund_payment")
      import_refund_payment
;;
  "sku_attr_value")
      import_sku_attr_value
;;
  "sku_sale_attr_value")
      import_sku_sale_attr_value
;;
"all")
   import_base_category1
   import_base_category2
   import_base_category3
   import_order_info
   import_order_detail
   import_sku_info
   import_user_info
   import_payment_info
   import_base_trademark
   import_activity_info
   import_cart_info
   import_comment_info
   import_coupon_use
   import_coupon_info
   import_favor_info
   import_order_refund_info
   import_order_status_log
   import_spu_info
   import_activity_rule
   import_base_dic
   import_order_detail_activity
   import_order_detail_coupon
   import_refund_payment
   import_sku_attr_value
   import_sku_sale_attr_value
;;
esac
</code></pre>
<p>（2）增加脚本执行权限</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 bin]$ chmod +x mysql_to_hdfs.sh
</code></pre>
<p>2）脚本使用</p>
<pre class=" language-sh"><code class="language-sh">[atguigu@hadoop102 bin]$ mysql_to_hdfs.sh all 2020-06-15
</code></pre>
<h3 id="2-5-4-项目经验"><a href="#2-5-4-项目经验" class="headerlink" title="2.5.4 项目经验"></a>2.5.4 项目经验</h3><p>Hive中的Null在底层是以“\N”来存储，而MySQL中的Null在底层就是Null，为了保证数据两端的一致性。在导出数据时采用–input-null-string和–input-null-non-string两个参数。导入数据时采用–null-string和–null-non-string。</p>
<h1 id="第3章-数据环境准备"><a href="#第3章-数据环境准备" class="headerlink" title="第3章 数据环境准备"></a>第3章 数据环境准备</h1><h2 id="3-1-Hive安装部署"><a href="#3-1-Hive安装部署" class="headerlink" title="3.1 Hive安装部署"></a>3.1 Hive安装部署</h2><p>（1）把apache-hive-3.1.2-bin.tar.gz上传到Linux的/opt/software目录下<br>（2）解压apache-hive-3.1.2-bin.tar.gz到/opt/module/目录下面</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 software]$ tar -zxvf /opt/software/apache-hive-3.1.2-bin.tar.gz -C /opt/module/
</code></pre>
<p>（3）修改apache-hive-3.1.2-bin.tar.gz的名称为hive</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 software]$ mv /opt/module/apache-hive-3.1.2-bin/ /opt/module/hive
</code></pre>
<p>（4）修改/etc/profile.d/my_env.sh，添加环境变量</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 software]$ sudo vim /etc/profile.d/my_env.sh
</code></pre>
<p>添加内容</p>
<pre class=" language-shell"><code class="language-shell">#HIVE_HOME
export HIVE_HOME=/opt/module/hive
export PATH=$PATH:$HIVE_HOME/bin
</code></pre>
<p>重启Xshell对话框或者source一下 /etc/profile.d/my_env.sh文件，使环境变量生效</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 software]$ source /etc/profile.d/my_env.sh
</code></pre>
<p>（5）解决日志Jar包冲突，进入/opt/module/hive/lib目录</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 lib]$ mv log4j-slf4j-impl-2.10.0.jar log4j-slf4j-impl-2.10.0.jar.bak
</code></pre>
<h2 id="3-2-Hive元数据配置到MySQL"><a href="#3-2-Hive元数据配置到MySQL" class="headerlink" title="3.2 Hive元数据配置到MySQL"></a>3.2 Hive元数据配置到MySQL</h2><h3 id="3-2-1-拷贝驱动"><a href="#3-2-1-拷贝驱动" class="headerlink" title="3.2.1 拷贝驱动"></a>3.2.1 拷贝驱动</h3><p>将MySQL的JDBC驱动拷贝到Hive的lib目录下</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 lib]$ cp /opt/software/mysql-connector-java-5.1.27.jar /opt/module/hive/lib/
</code></pre>
<h3 id="3-2-2-配置Metastore到MySQL"><a href="#3-2-2-配置Metastore到MySQL" class="headerlink" title="3.2.2 配置Metastore到MySQL"></a>3.2.2 配置Metastore到MySQL</h3><p>（1）在$HIVE_HOME/conf目录下新建hive-site.xml文件</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 conf]$ vim hive-site.xml
</code></pre>
<p>（2）添加如下内容</p>
<pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0"?></span>
<span class="token prolog">&lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>javax.jdo.option.ConnectionURL<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>jdbc:mysql://hadoop102:3306/metastore?useSSL=false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>javax.jdo.option.ConnectionDriverName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>com.mysql.jdbc.Driver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>javax.jdo.option.ConnectionUserName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>javax.jdo.option.ConnectionPassword<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>000000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>hive.metastore.warehouse.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>/user/hive/warehouse<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>hive.metastore.schema.verification<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>hive.server2.thrift.port<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>10000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>hive.server2.thrift.bind.host<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>hadoop102<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>hive.metastore.event.db.notification.api.auth<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>hive.cli.print.header<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>hive.cli.print.current.db<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span>
</code></pre>
<h2 id="3-3-启动Hive"><a href="#3-3-启动Hive" class="headerlink" title="3.3 启动Hive"></a>3.3 启动Hive</h2><h3 id="3-3-1-初始化元数据库"><a href="#3-3-1-初始化元数据库" class="headerlink" title="3.3.1 初始化元数据库"></a>3.3.1 初始化元数据库</h3><p>（1）登陆MySQL</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 conf]$ mysql -uroot -p000000
</code></pre>
<p>（2）新建Hive元数据库</p>
<pre class=" language-shell"><code class="language-shell">mysql> create database metastore;
mysql> quit
</code></pre>
<p>（3）初始化Hive元数据库</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 conf]$ schematool -initSchema -dbType mysql -verbose
</code></pre>
<h3 id="3-3-2-启动Hive客户端"><a href="#3-3-2-启动Hive客户端" class="headerlink" title="3.3.2 启动Hive客户端"></a>3.3.2 启动Hive客户端</h3><p>（1）启动Hive客户端</p>
<pre class=" language-shell"><code class="language-shell">[atguigu@hadoop102 hive]$ bin/hive
</code></pre>
<p>（2）查看一下数据库</p>
<pre class=" language-shell"><code class="language-shell">hive (default)> show databases;
OK
database_name
default
</code></pre>
<p><a href="https://bigworldxld.github.io/2022/02/07/undefined.html">大数据项目之尚品汇（3数据仓库系统）</a></p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">读序</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://bigworldxld.github.io/2022/02/06/41690.html">https://bigworldxld.github.io/2022/02/06/41690.html</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">读序</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/hive/">
                                    <span class="chip bg-color">hive</span>
                                </a>
                            
                                <a href="/tags/spark/">
                                    <span class="chip bg-color">spark</span>
                                </a>
                            
                                <a href="/tags/kafka/">
                                    <span class="chip bg-color">kafka</span>
                                </a>
                            
                                <a href="/tags/Azkaban/">
                                    <span class="chip bg-color">Azkaban</span>
                                </a>
                            
                                <a href="/tags/hadoop/">
                                    <span class="chip bg-color">hadoop</span>
                                </a>
                            
                                <a href="/tags/zookeeper/">
                                    <span class="chip bg-color">zookeeper</span>
                                </a>
                            
                                <a href="/tags/flume/">
                                    <span class="chip bg-color">flume</span>
                                </a>
                            
                                <a href="/tags/sqoop/">
                                    <span class="chip bg-color">sqoop</span>
                                </a>
                            
                                <a href="/tags/superset/">
                                    <span class="chip bg-color">superset</span>
                                </a>
                            
                                <a href="/tags/hbase/">
                                    <span class="chip bg-color">hbase</span>
                                </a>
                            
                                <a href="/tags/Presto/">
                                    <span class="chip bg-color">Presto</span>
                                </a>
                            
                                <a href="/tags/kylin/">
                                    <span class="chip bg-color">kylin</span>
                                </a>
                            
                                <a href="/tags/zabbix/">
                                    <span class="chip bg-color">zabbix</span>
                                </a>
                            
                                <a href="/tags/Kerberos/">
                                    <span class="chip bg-color">Kerberos</span>
                                </a>
                            
                                <a href="/tags/ranger/">
                                    <span class="chip bg-color">ranger</span>
                                </a>
                            
                                <a href="/tags/atlas/">
                                    <span class="chip bg-color">atlas</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2022/02/07/10237.html">
                    <div class="card-image">
                        
                        <img src="/images/datawarehouse.jpg" class="responsive-img" alt="大数据项目之尚品汇（3数据仓库系统）">
                        
                        <span class="card-title">大数据项目之尚品汇（3数据仓库系统）</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2022-02-07
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/data-warehouse/" class="post-category">
                                    data warehouse
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/hive/">
                        <span class="chip bg-color">hive</span>
                    </a>
                    
                    <a href="/tags/spark/">
                        <span class="chip bg-color">spark</span>
                    </a>
                    
                    <a href="/tags/kafka/">
                        <span class="chip bg-color">kafka</span>
                    </a>
                    
                    <a href="/tags/Azkaban/">
                        <span class="chip bg-color">Azkaban</span>
                    </a>
                    
                    <a href="/tags/hadoop/">
                        <span class="chip bg-color">hadoop</span>
                    </a>
                    
                    <a href="/tags/zookeeper/">
                        <span class="chip bg-color">zookeeper</span>
                    </a>
                    
                    <a href="/tags/flume/">
                        <span class="chip bg-color">flume</span>
                    </a>
                    
                    <a href="/tags/sqoop/">
                        <span class="chip bg-color">sqoop</span>
                    </a>
                    
                    <a href="/tags/superset/">
                        <span class="chip bg-color">superset</span>
                    </a>
                    
                    <a href="/tags/hbase/">
                        <span class="chip bg-color">hbase</span>
                    </a>
                    
                    <a href="/tags/Presto/">
                        <span class="chip bg-color">Presto</span>
                    </a>
                    
                    <a href="/tags/kylin/">
                        <span class="chip bg-color">kylin</span>
                    </a>
                    
                    <a href="/tags/zabbix/">
                        <span class="chip bg-color">zabbix</span>
                    </a>
                    
                    <a href="/tags/Kerberos/">
                        <span class="chip bg-color">Kerberos</span>
                    </a>
                    
                    <a href="/tags/ranger/">
                        <span class="chip bg-color">ranger</span>
                    </a>
                    
                    <a href="/tags/atlas/">
                        <span class="chip bg-color">atlas</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2022/02/05/57156.html">
                    <div class="card-image">
                        
                        <img src="/images/Flume.jpg" class="responsive-img" alt="大数据技术之Flume">
                        
                        <span class="card-title">大数据技术之Flume</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2022-02-05
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/hadoop%E7%94%9F%E6%80%81%E5%9C%88/" class="post-category">
                                    hadoop生态圈
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Flume/">
                        <span class="chip bg-color">Flume</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    

    <div class="container row center-align"
         style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2021-2025</span>
            
            <a href="/about" target="_blank">读序</a>
            |&nbsp;Author&nbsp;<a href="https://blog.bigworldxld.dpdns.org/" target="_blank">bigworldxld</a>
            |&nbsp;Dailylife&nbsp;<a href="https://bigworldxld.github.io/duxu-dailylife/" target="_blank">blog</a>
			|&nbsp;Desktop&nbsp;<a href="https://bigworldxld.github.io/desktop/" target="_blank">desktop</a>
            <br>
			
            
            
            
                <!-  ->
                <script>
                var busuanzi_config = {
                    siteid: 'bigworldxld_blog_2021'  // 唯一站点标识
                };
                </script>
                <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            
           
			 
				<span id="busuanzi_container_site_pv" style='display:none'></span>
				<i class="fa fa-heart-o"></i>
			本站总访问量 <span id="busuanzi_value_site_pv" class="white-color"></span>

			

			
				<span id="busuanzi_container_site_uv" style='display:none'></span>
					人次,&nbsp;访客数 <span id="busuanzi_value_site_uv" class="white-color"></span> 人.

			

			
            <br>
		


            <!-- 运行天数提醒. -->
            
                <span id="sitetime"> Loading ...</span>
                <script>
                    var calcSiteTime = function () {
                        var seconds = 1000;
                        var minutes = seconds * 60;
                        var hours = minutes * 60;
                        var days = hours * 24;
                        var years = days * 365;
                        var today = new Date();
                        var startYear = "2021";
                        var startMonth = "12";
                        var startDate = "30";
                        var startHour = "0";
                        var startMinute = "0";
                        var startSecond = "0";
                        var todayYear = today.getFullYear();
                        var todayMonth = today.getMonth() + 1;
                        var todayDate = today.getDate();
                        var todayHour = today.getHours();
                        var todayMinute = today.getMinutes();
                        var todaySecond = today.getSeconds();
                        var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                        var diff = t2 - t1;
                        var diffYears = Math.floor(diff / years);
                        var diffDays = Math.floor((diff / days) - diffYears * 365);

                        // 区分是否有年份.
                        var language = 'zh-CN';
                        if (startYear === String(todayYear)) {
                            document.getElementById("year").innerHTML = todayYear;
                            var daysTip = 'This site has been running for ' + diffDays + ' days';
                            if (language === 'zh-CN') {
                                daysTip = '本站已运行 ' + diffDays + ' 天';
                            } else if (language === 'zh-HK') {
                                daysTip = '本站已運行 ' + diffDays + ' 天';
                            }
                            document.getElementById("sitetime").innerHTML = daysTip;
                        } else {
                            document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                            var yearsAndDaysTip = 'This site has been running for ' + diffYears + ' years and '
                                + diffDays + ' days';
                            if (language === 'zh-CN') {
                                yearsAndDaysTip = '本站已运行 ' + diffYears + ' 年 ' + diffDays + ' 天';
                            } else if (language === 'zh-HK') {
                                yearsAndDaysTip = '本站已運行 ' + diffYears + ' 年 ' + diffDays + ' 天';
                            }
                            document.getElementById("sitetime").innerHTML = yearsAndDaysTip;
                        }
                    }

                    calcSiteTime();
                </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">

    <a href="https://github.com/bigworldxld/bigworldxld.github.io" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:2117376396@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=2117376396" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 2117376396" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>
<!- <div class="progress-bar"></div>->
<span id="sitetime"></span>
<script language = javascript >
    function siteTime() {
        window.setTimeout("siteTime()", 1000);
		let time = new Date().toLocaleString();
        var seconds = 1000;
        var minutes = seconds * 60;
        var hours = minutes * 60;
        var days = hours * 24;
        var years = days * 365;
        var today = new Date();
        var todayYear = today.getFullYear();
        var todayMonth = today.getMonth() + 1;
        var todayDate = today.getDate();
        var todayHour = today.getHours();
        var todayMinute = today.getMinutes();
        var todaySecond = today.getSeconds();
        var t1 = Date.UTC(2021, 12, 30, 00, 00, 00); //北京时间2018-2-13 00:00:00 
        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond); 
        var diff = t2 - t1; var diffYears = Math.floor(diff / years); 
        var diffDays = Math.floor((diff / days) - diffYears * 365); 
        var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours); 
        var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) / minutes); 
        var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours - diffMinutes * minutes) / seconds); 
		document.getElementById("sitetime").innerHTML = "当前时间为"+ time +"<br/>本站已运行 " +diffYears+" 年 "+diffDays + " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒"; 
    } 
    siteTime(); 
</script>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
     
        <script type="text/javascript">
            // 只在桌面版网页启用特效
            var windowWidth = $(window).width();
            if (windowWidth > 768) {
                document.write('<script type="text/javascript" src="/libs/others/star.js"><\/script>');
            }
        </script>
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

<script type="text/javascript">
    var OriginTitile = document.title,
        st;
    document.addEventListener("visibilitychange", function () {
        document.hidden ? (document.title = "๑•̀ㅂ•́) ✧看不见～看不见～", clearTimeout(st)) : (document.title =
            "(๑•̀ㅂ•́) ✧看见～", st = setTimeout(function () {
                document.title = OriginTitile
            }, 3e3))
    })
</script>

</body>

</html>
